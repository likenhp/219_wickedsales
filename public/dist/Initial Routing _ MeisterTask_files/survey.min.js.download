!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s="vSUH")}({"/C1n":function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){return l()({url:e,method:"get",crossOrigin:!0}).then(function(e){return e})}function i(e,t,n){return l()(u({url:e,method:"post",crossOrigin:!0,headers:{"Content-Type":"application/"+(n?"json":"x-www-form-urlencoded; charset=UTF-8")}},n&&{type:"json"},{data:t})).then(function(e){return e})}function a(e){var t=e.mode,n=e.token,o=e.surveyId,i=e.domain,a=e.feedback;r(e,["mode","token","surveyId","domain","feedback"]);return{survey:!1,followup:"upsert"===t,token:n,surveyid:o,domain:i,data:a.map(function(e){return{label:e.label?String(e.label).replace('"',""):"",value:"dom"!==e.type&&"selector"!==e.type?Object(p.t)(e.value):e.value,type:e.type}})}}function s(e){var t=e.formKey,n=e.domain,r=e.webView,s="https://cacheorcheck.mopinion.com/survey/public",c="https://"+n+"/survey/public";return{getConfig:function(e,i){return o(s+"/json-config?key="+t+"&domain="+n+(r?"&webView=true":"")+(e?"&withBase=true":"")+(i?"&forceRefresh=true":""))},getEmoji:function(e){return i(s+"/emoji",{blockId:e,domain:n})},getIcons:function(e){return e=Object(p.j)(e)?e:[e],i(s+"/icons",{icons:e,domain:n})},postFeedback:function(e){return i("https://survey.app.mopinion.com/api/1/data",JSON.stringify(a(e)),!0)},notifyUser:function(e){return i(c+"/notify-user",e)}}}var c=n("9yYZ"),l=n.n(c),p=n("fkUE"),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.a=s},0:function(){},"5D9O":function(e,t,n){e.exports=n("wVGV")()},"9yYZ":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(e,t,n){void 0!==module&&module.exports?module.exports=n():(__WEBPACK_AMD_DEFINE_FACTORY__=n,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(0,0,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):e._timedOut?n(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request)))}}function setHeaders(e,t){var n,r=t.headers||{};r.Accept=r.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var o="undefined"!=typeof FormData&&t.data instanceof FormData;t.crossOrigin||r[requestedWith]||(r[requestedWith]=defaultHeaders.requestedWith),r[contentType]||o||(r[contentType]=t.contentType||defaultHeaders.contentType);for(n in r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}function setCredentials(e,t){void 0!==t.withCredentials&&void 0!==e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,r){var o=uniqid++,i=e.jsonpCallback||"callback",a=e.jsonpCallbackName||reqwest.getcallbackPrefix(o),s=new RegExp("((^|\\?|&)"+i+")=([^&]+)"),c=r.match(s),l=doc.createElement("script"),p=0,u=-1!==navigator.userAgent.indexOf("MSIE 10.0");return c?"?"===c[3]?r=r.replace(s,"$1="+a):a=c[3]:r=urlappend(r,i+"="+a),context[a]=generalCallback,l.type="text/javascript",l.src=r,l.async=!0,void 0===l.onreadystatechange||u||(l.htmlFor=l.id="_reqwest_"+o),l.onload=l.onreadystatechange=function(){if(l[readyState]&&"complete"!==l[readyState]&&"loaded"!==l[readyState]||p)return!1;l.onload=l.onreadystatechange=null,l.onclick&&l.onclick(),t(lastValue),lastValue=void 0,head.removeChild(l),p=1},head.appendChild(l),{abort:function(){l.onload=l.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(l),p=1}}}function getRequest(e,t){var n,r=this.o,o=(r.method||"GET").toUpperCase(),i="string"==typeof r?r:r.url,a=!1!==r.processData&&r.data&&"string"!=typeof r.data?reqwest.toQueryString(r.data):r.data||null,s=!1;return"jsonp"!=r.type&&"GET"!=o||!a||(i=urlappend(i,a),a=null),"jsonp"==r.type?handleJsonp(r,e,t,i):(n=r.xhr&&r.xhr(r)||xhr(r),n.open(o,i,!1!==r.async),setHeaders(n,r),setCredentials(n,r),context[xDomainRequest]&&n instanceof context[xDomainRequest]?(n.onload=e,n.onerror=t,n.onprogress=function(){},s=!0):n.onreadystatechange=handleReadyState(this,e,t),r.before&&r.before(n),s?setTimeout(function(){n.send(a)},200):n.send(a),n)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){if(null!==e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(e){return error(resp,"Could not parse JSON in response",e)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n,r,o,i,a=e.name,s=e.tagName.toLowerCase(),c=function(e){e&&!e.disabled&&t(a,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&a)switch(s){case"input":/reset|button|image|file/i.test(e.type)||(n=/checkbox/i.test(e.type),r=/radio/i.test(e.type),o=e.value,(!(n||r)||e.checked)&&t(a,normalize(n&&""===o?"on":o)));break;case"textarea":t(a,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())c(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(i=0;e.length&&i<e.length;i++)e.options[i].selected&&c(e.options[i])}}function eachFormElement(){var e,t,n=this;for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,n),function(e,t){var r,o,i;for(r=0;r<t.length;r++)for(i=e[byTag](t[r]),o=0;o<i.length;o++)serial(i[o],n)}(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}function buildParams(e,t,n,r){var o,i,a,s=/\[\]$/;if(isArray(t))for(i=0;t&&i<t.length;i++)a=t[i],n||s.test(e)?r(e,a):buildParams(e+"["+("object"==typeof a?i:"")+"]",a,n,r);else if(t&&"[object Object]"===t.toString())for(o in t)buildParams(e+"["+o+"]",t[o],n,r);else r(e,t)}var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=__webpack_require__(0)}catch(e){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(!0===e.crossOrigin){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},catch:function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,r,o=t||!1,i=[],a=encodeURIComponent,s=function(e,t){t="function"==typeof t?t():null==t?"":t,i[i.length]=a(e)+"="+a(t)};if(isArray(e))for(r=0;e&&r<e.length;r++)s(e[r].name,e[r].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],o,s);return i.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})},Asjh:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},Hz7D:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return d});var a=n("KM04"),s=(n.n(a),n("5D9O")),c=(n.n(s),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),l="undefined"!=typeof window&&window.recaptchaOptions&&window.recaptchaOptions.lang?"&hl="+window.recaptchaOptions.lang:"",p="https://www.google.com/recaptcha/api.js?&onload=recaptchaLoaded&render=explicit"+l,u=function(){return"undefined"!=typeof window&&void 0!==window.grecaptcha},d=function(e){function t(){var t=o(this,e.call(this));return t.execute=function(){return!(!u()||!t.element||null===t.recaptchaId||"invisible"!==t.props.size)&&(grecaptcha.execute(t.recaptchaId),!0)},t.reset=function(){return!(!u()||!t.element||null===t.recaptchaId)&&(grecaptcha.reset(t.recaptchaId),!0)},t.getResponse=function(){return u()&&t.element&&null!==t.recaptchaId?grecaptcha.getResponse(t.recaptchaId):null},t.handleChange=function(e){t.props.onChange&&t.props.onChange(e)},t.handleExpired=function(){t.props.onExpired&&t.props.onExpired()},t.removeRecaptcha=function(){grecaptcha.reset(t.recaptchaId)},t.renderRecaptcha=function(){t.recaptchaId=grecaptcha.render(t.element,{sitekey:t.props.sitekey,callback:t._handleChange,theme:t.props.theme,type:t.props.type,tabindex:t.props.tabindex,"expired-callback":t._handleExpired,size:t.props.size,stoken:t.props.stoken,badge:t.props.badge})},t.captureRef=function(e){t.element=e},t.initializeRecaptcha=function(){if(u())t.clearTimer(),t.renderRecaptcha();else if(t.isRecaptchaJSLibInjected())t.startTimer();else{var e=document.createElement("script");window.recaptchaLoaded=t.initializeRecaptcha.bind(t),e.src=p,e.async=1,e.defer=1,e.onerror=function(){console.log("Error loading google recaptcha!")},document.body.appendChild(e)}},t.isRecaptchaJSLibInjected=function(){return"undefined"!=typeof window&&(!(!document.scripts||0===document.scripts.length)&&c([],document.scripts).filter(function(e){return null!==e.src.match(/((http|https):)?\/\/(www\.)?google\.com\/recaptcha\/(.*)/i)}).length>0)},t.startTimer=function(){t.waitingTimer=setTimeout(t._initializeRecaptcha,200)},t.clearTimer=function(){null!==t.waitingTimer&&clearInterval(t.waitingTimer)},t.waitingTimer=null,t.element=null,t.recaptchaId=null,t._captureRef=t.captureRef.bind(t),t._initializeRecaptcha=t.initializeRecaptcha.bind(t),t._handleExpired=t.handleExpired.bind(t),t._handleChange=t.handleChange.bind(t),t}return i(t,e),t.prototype.componentDidMount=function(){this.initializeRecaptcha()},t.prototype.componentWillUnmount=function(){this.clearTimer(),u()&&this.element&&null!==this.recaptchaId&&this.removeRecaptcha(),window.___grecaptcha_cfg&&(delete ___grecaptcha_cfg.clients[this.recaptchaId],___grecaptcha_cfg.count--)},t.prototype.render=function(){var e=this.props,t=r(e,["sitekey","onChange","theme","type","tabindex","onExpired","size","stoken","grecaptcha","badge"]);return Object(a.h)("div",c({},t,{ref:this._captureRef}))},t}(a.Component);d.defaultProps={theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"}},I2Md:function(module,__webpack_exports__,__webpack_require__){"use strict";function _objectWithoutProperties(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function mapBrFromString(e){return"string"!=typeof e?e:1===e.split("<br/>").length?e:e.split("<br/>").map(function(e){return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",null,e,_ref)})}__webpack_require__.d(__webpack_exports__,"g",function(){return Group}),__webpack_require__.d(__webpack_exports__,"h",function(){return GroupTitle}),__webpack_require__.d(__webpack_exports__,"o",function(){return Section}),__webpack_require__.d(__webpack_exports__,"i",function(){return Link}),__webpack_require__.d(__webpack_exports__,"e",function(){return ErrorMessage}),__webpack_require__.d(__webpack_exports__,"k",function(){return Multimedia}),__webpack_require__.d(__webpack_exports__,"l",function(){return Rating}),__webpack_require__.d(__webpack_exports__,"j",function(){return MatrixLikert}),__webpack_require__.d(__webpack_exports__,"q",function(){return TextInput}),__webpack_require__.d(__webpack_exports__,"d",function(){return DropDown}),__webpack_require__.d(__webpack_exports__,"p",function(){return SelectList}),__webpack_require__.d(__webpack_exports__,"c",function(){return Contact}),__webpack_require__.d(__webpack_exports__,"a",function(){return ActionButton}),__webpack_require__.d(__webpack_exports__,"f",function(){return ExternalData}),__webpack_require__.d(__webpack_exports__,"n",function(){return Screenshot}),__webpack_require__.d(__webpack_exports__,"b",function(){return Branding}),__webpack_require__.d(__webpack_exports__,"m",function(){return ReCaptchaWrapper});var __WEBPACK_IMPORTED_MODULE_0_preact__=__webpack_require__("KM04"),__WEBPACK_IMPORTED_MODULE_0_preact___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__),__WEBPACK_IMPORTED_MODULE_1__utils_Helpers__=__webpack_require__("fkUE"),__WEBPACK_IMPORTED_MODULE_2__Capture__=__webpack_require__("sk4b"),__WEBPACK_IMPORTED_MODULE_3__SvgIcon__=__webpack_require__("lqzJ"),__WEBPACK_IMPORTED_MODULE_4__ReCaptcha__=__webpack_require__("Hz7D"),__WEBPACK_IMPORTED_MODULE_5__api__=__webpack_require__("/C1n"),_class8,_temp7,_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_ref=Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("br",null),Group=function(e){function t(t){var n=_possibleConstructorReturn(this,e.call(this,t));return n.scrollAndFocus=function(){n.group.scrollIntoView({behavior:"smooth",block:"center"});try{n.group.querySelector("input, textarea, .ui-stars-star, .nice-select").focus()}catch(e){}},n.state={},n.group=null,n}return _inherits(t,e),t.prototype.shouldComponentUpdate=function(e){return!Object(__WEBPACK_IMPORTED_MODULE_1__utils_Helpers__.r)(e,this.props)},t.prototype.componentDidUpdate=function(e){!e.elementState.focusInvalid&&this.props.elementState.focusInvalid&&this.scrollAndFocus()},t.prototype.render=function(e){var t=this;return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{class:"control-group question "+(e.class?e.class:""),style:{display:e.show?"block":"none"},"data-index":e.groupIndex,key:e.key,id:e.id,ref:function(e){return t.group=e}},e.children)},t}(__WEBPACK_IMPORTED_MODULE_0_preact__.Component),_ref3=Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(__WEBPACK_IMPORTED_MODULE_3__SvgIcon__.a,{icon:"question"}),GroupTitle=function(e,t){var n=e.children,r=e.block,o=_objectWithoutProperties(e,["children","block"]),i=t.text,a={tabIndex:0};return["textarea","input"].indexOf(r.typeName)>-1&&(a.for="element-"+r.typeName+"-"+r.id),"section_break"!==r.typeName?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("legend",{class:"block-title",id:"block-title-"+r.typeName+"-"+r.id},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("label",a,n.map(function(e){return mapBrFromString(e)})),r.tooltip?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("a",{href:"javascript:;",class:"tooltip"},_ref3," ",Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",null,r.tooltip)):null,o.required?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",{tabindex:"0","aria-label":i.requiredMarkLabel,class:"required-mark"},"*"):null):Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("h3",{class:"section-title"},n.map(function(e){return mapBrFromString(e)}))},Section=function(e){var t=_objectWithoutProperties(e,["children"]);return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{id:"section_description_"+t.block.id,class:"section-description"},mapBrFromString(t.block.properties.description))},Link=function(e){var t=_objectWithoutProperties(e,["children"]),n=t.block,r=t.block.properties,o=void 0===r?{}:r;return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{id:"link_"+n.id,title:o.plaintext,tabindex:"0",class:"link_block"},function(){var e=o.hyperlinktext&&o.hyperlinktext.match(/\/\*(.*)\*\//gi)&&o.hyperlinktext.match(/\/\*(.*)\*\//gi)[0].replace("/*","").replace("*/",""),n={},r=void 0;if("function"===o.linktype)n.onClick=function(){"next_page"===o.linktype_function?t.setPage(!0,!0):"prev_page"===o.linktype_function?t.setPage(!1,!0):"close_modal"===o.linktype_function||"close_embedded"===o.linktype_function||"close"===o.linktype_function?t.closeForm():"start"===o.linktype_function&&t.startSurvey()};else{var i=o.hyperlinkhref&&o.hyperlinkhref.match(/((http(s?)))/gi)&&o.hyperlinkhref.match(/((http(s?)))/gi)?o.hyperlinkhref:""+o.hyperlinkprotocol+o.hyperlinkhref;n.href=i,n.target="_blank",n.onClick=function(){Object(__WEBPACK_IMPORTED_MODULE_1__utils_Helpers__.v)({event:"redirect",key:t.surveyKey,formName:t.surveyProperties.name,url:i})}}return n.class=o.show_as_panels?"panel":o.show_as_buttons?"btn":"",r=(o.show_as_panels||o.show_as_buttons)&&o.icon?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(__WEBPACK_IMPORTED_MODULE_3__SvgIcon__.a,{icon:o.icon}):"",Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",null,o.description.split(e).reduce(function(t,i,a){return a?t.concat(Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("a",n,"right"!==o.iconAlignment?[r,e]:[e,r]),i):[i]},[]))}())},ErrorMessage=function(e){var t=e.children;_objectWithoutProperties(e,["children"]);return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{class:"alert alert-danger","aria-live":"assertive"},t)},Multimedia=function(e){function t(){for(var t,n,r,o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=n=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),n.state={},n.getMedia=function(){var e=n.props,t=e.block.properties;return"image"===t.mediatype&&["jpg","jpeg","gif","png","svg"].indexOf(t.location.split(".").pop())>-1?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("img",{src:t.location,style:"responsive"===t.media_size?{height:"auto",width:"100%"}:{height:t.media_height,width:t.media_width}}):["youtube","vimeo"].indexOf(t.mediatype)>-1&&t.location.match(/^(https\:\/\/www\.youtube)|^(https\:\/\/player\.vimeo)/gi)?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{style:"responsive"===t.media_size?{padding:"56.25% 0 0 0",position:"relative"}:{width:"100%",position:"relative",textAlign:t.media_align}},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("iframe",{class:"video-frame",src:t.location,frameborder:0,allow:"accelerometer; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0,style:"responsive"===t.media_size?{height:"100%",width:"100%",position:"absolute",top:0,left:0}:{height:t.media_height,width:t.media_width}})):void 0},r=t,_possibleConstructorReturn(n,r)}return _inherits(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(e){return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{id:"multimedia_"+e.block.id,class:"section-multimedia"},this.getMedia())},t}(__WEBPACK_IMPORTED_MODULE_0_preact__.Component),_ref7=Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(__WEBPACK_IMPORTED_MODULE_3__SvgIcon__.a,{icon:"star",className:"is-before"}),_ref8=Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(__WEBPACK_IMPORTED_MODULE_3__SvgIcon__.a,{icon:"star",className:"is-after"}),Rating=function(e){function t(){for(var t,n,r,o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=n=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),n.state={selectedScore:n.props.elementState.value||-1,hoverScore:-1,angry:"",sad:"",neutral:"",happy:"","extra-happy":""},n.emojis=["angry","sad","neutral","happy","extra-happy"],n.barInner=["--","-","0","+","++"],n.range=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=t-e+1;r--;)n[r]=t--;return n},n.getStateClass=function(e){var t=n.props.block.properties,r=n.state,o=r.hoverScore,i=r.selectedScore;return(-1!=o&&!t.reverseScore&&e<=o||-1!=o&&t.reverseScore&&e>=o?"ui-stars-star-hover":"")+"\n\t\t\t"+(-1!==i&&!t.reverseScore&&e<=i||-1!==i&&-1==o&&t.reverseScore&&e>=i?"ui-stars-star-on":"")},r=t,_possibleConstructorReturn(n,r)}return _inherits(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.block,n=this.context.requestDomain;"emoji"===t.properties.type&&Object(__WEBPACK_IMPORTED_MODULE_5__api__.a)({domain:n}).getEmoji(t.id).then(function(t){return e.setState(_extends({},t))})},t.prototype.render=function(e,t){var n=this,r=e.block,o=e.block,i=o.typeName,a=o.properties,s=e.elementState,c="nps"===i?10:"bar"===a.type||"ces"===i||"emoji"===a.type?5:a.scale,l="numeric"===a.type||"stars"===a.type?a.includeZero?0:1:"nps"===i?0:1,p=a.reverseScore?this.range(l,c).reverse():this.range(l,c),u=a.legend?a.legend.legendLow:"",d=a.legend?a.legend.legendHigh:"",_=a.reverseScore?[].concat(this.emojis).reverse():this.emojis;return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{class:"rating-group "+i+"-group "+(a.type?a.type:"")+" "+(a.type?a.type:"")+"-group "+i+" "+("emoji"==a.type&&a.showCaptions?"show-labels":"")+" "+(a.reverseScore?"reversed":"")+" "+(a.legend?"has-legend":"")},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{class:"stars"===a.type||"ces"===i?"":"choice-row"},p.map(function(o,c){var l=["emoji","stars"].indexOf(a.type)>-1&&a.labelsAsValue?a["emoji"===a.type?"emoji":"elements"][o].label:o,p=_extends({},e,{key:c,selectableIndex:c,value:l,checked:String(s.value)===String(l),ariaLabel:a["emoji"===a.type?"emoji":"elements"]&&a["emoji"===a.type?"emoji":"elements"][o]?a["emoji"===a.type?"emoji":"elements"][o].label:o});if("emoji"===a.type&&(p.labelAtts={class:"emoji-"+_[c]},a.showCaptions&&(p.labelAtts["data-label"]=a.emoji[o].label)),"stars"===a.type||"ces"===i)return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{tabindex:"0","aria-label":"score "+o,class:"ui-stars-star star_"+o+" "+n.getStateClass(o),onClick:function(){n.setState({selectedScore:o},function(){e.updateForm(l,r,e.elementIndex)})},onMouseEnter:function(){t.hoverScore!==o&&n.setState({hoverScore:o})},onMouseLeave:function(){n.setState({hoverScore:-1})},onKeyDown:function(t){32!=t.keyCode&&13!=t.keyCode||n.setState({selectedScore:o},function(){e.updateForm(l,r,e.elementIndex)})}},"stars"===a.type&&_ref7,"stars"===a.type&&_ref8);var u="emoji"===a.type?{dangerouslySetInnerHTML:{__html:t[_[c]]||null}}:null;return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(Selectable,p,Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",_extends({ref:function(e){return n[_[c]]=e}},u),"emoji"!==a.type&&"bar"!==a.type?o:"bar"===a.type?n.barInner[c]:null))}),!a.showCaptions||"stars"!==a.type&&"ces"!==i?null:Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",{class:"caption"},-1==t.hoverScore&&-1==t.selectedScore?"":-1!=t.hoverScore?a.elements[t.hoverScore].label:a.elements[t.selectedScore].label)),a.legend&&Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",{className:"rating-legend legend-low"},u),a.legend&&Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",{className:"rating-legend legend-high"},d))},t}(__WEBPACK_IMPORTED_MODULE_0_preact__.Component),MatrixLikert=function(e){var t=_objectWithoutProperties(e,["children"]),n=t.block,r=n.properties,o=r.elements,i=r.values,a=r.weights;return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("table",{class:"table table-striped "+t.block.typeName+"-table"},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("thead",null,function(){return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("tr",null,Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("th",{class:n.typeName+"-subject-label"}),Object.keys(i).map(function(e){return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("th",{class:n.typeName+"-answer-label"},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",null,Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",null,i[e].label)))}),a?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("th",{class:n.typeName+"-spacer"}):null,a?Object.keys(a).map(function(e){return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("th",{class:n.typeName+"-answer-label"},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",null,Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",null,a[e].label)))}):null)}()),Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("tbody",null,function(){return Object.keys(o).map(function(e,r){var s=n.typeName+"_"+n.id+"_"+(r+1);return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("tr",null,Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("td",{class:n.typeName+"-subject"},o[e].label),Object.keys(i).map(function(e,r){return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("td",{class:n.typeName+"-answer","data-label":i[e].label},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{class:n.typeName+"-answer-inner"},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("input",{type:"radio",name:s+("matrix"===n.typeName?"_value":""),id:s+("matrix"===n.typeName?"_value":"")+"_"+r,value:i[e].value?i[e].value:i[e].label,onChange:function(e){e.target.checked&&t.updateForm(e.target.value,n,t.elementIndex,s+("matrix"===n.typeName?"_value":""))}}),Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("label",{for:s+("matrix"===n.typeName?"_value":"")+"_"+r})))}),a?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("td",{class:n.typeName+"-spacer"}):null,a?Object.keys(a).map(function(e,r){return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("td",{class:n.typeName+"-answer","data-label":a[e].label},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{class:n.typeName+"-answer-inner"},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("input",{type:"radio",name:s+"_weight",id:s+"_weight_"+r,value:a[e].value?a[e].value:a[e].label,onChange:function(e){e.target.checked&&t.updateForm(e.target.value,n,t.elementIndex,s+"_weight")}}),Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("label",{for:s+"_weight_"+r})))}):null,Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("input",{type:"hidden",id:s}))})}()))},TextInput=function(e){var t=e.block,n=e.elementIndex,r=e.elementState,o=e.field,i=_objectWithoutProperties(e,["children","block","elementIndex","elementState","field"]),a={onChange:function(e){i.updateForm(e.target.value,{event:"change"},n,o||"")},onInput:function(e){i.updateForm(e.target.value,{event:"input"},n,o||"")},onBlur:function(){},placeholder:t.properties.placeholder?t.properties.placeholder:"",value:r.value,"aria-labelledby":"block-title-"+t.typeName+"-"+t.id,id:"element-"+t.typeName+"-"+t.id};navigator.userAgent.match(/(iPod|iPhone|iPad)/i)&&(a.style={fontSize:"16px"});var s=t.properties.format?t.properties.format:"text";return"textarea"===t.typeName?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("textarea",a):Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("input",_extends({},a,{type:s}))},DropDown=function(e){function t(){for(var t,n,r,o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=n=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),n.state={value:n.props.elementState.value,label:"",listOpen:!1,maxHeight:250},n.setValue=function(e,t){var r=n.props,o=r.updateForm,i=r.block,a=r.elementIndex,s=r.field;n.setState({value:e,label:t},function(){o(n.state.value,i,a,s||"")})},n.toggleListOuter=function(e){n.select.contains(e.target)||n.toggleList()},n.toggleList=function(){clearTimeout(n.focusEvent);var e=n.select.getBoundingClientRect(),t=n.props.contentDiv.offsetHeight-e.top-e.height-20;t=t>250?250:t,n.setState(function(e){return{listOpen:!e.listOpen,maxHeight:t}},function(){setTimeout(function(){n.state.listOpen?n.props.contentDiv.addEventListener("click",n.toggleListOuter):n.props.contentDiv.removeEventListener("click",n.toggleListOuter)})})},r=t,_possibleConstructorReturn(n,r)}return _inherits(t,e),t.prototype.componentWillReceiveProps=function(e){e.elementState.value!==this.state.value&&this.setState({value:e.value,label:""})},t.prototype.options=function(){var e=this,t=this.props.block,n=this.state.listOpen;return Object.keys(t.properties.elements).map(function(r){var o=t.properties.elements[r],i=o.value?o.value:o.label,a=r===Object.keys(t.properties.elements).pop();return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("li",{tabIndex:n?0:-1,onKeyDown:function(t){n&&(13===t.keyCode&&(e.setValue(i,o.label),e.toggleList()),a&&9===t.keyCode&&e.toggleList())},onClick:function(t){t.stopPropagation(),e.setValue(i,o.label),e.toggleList()},"data-value":i,id:"option_"+r,class:"option "+(i==e.state.value?"selected focus":"")},o.label)})},t.prototype.render=function(e,t){var n=this,r=e.block.properties.placeholder,o=void 0===r?"":r,i=t.label?t.label:o;return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{tabIndex:0,class:"nice-select "+(t.listOpen?"open":""),onClick:this.toggleList,onFocus:function(){n.focusEvent=setTimeout(function(){n.toggleList()},250)},ref:function(e){return n.select=e}},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",{class:"current"},i),Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("ul",{class:"list",style:{maxHeight:t.maxHeight}},this.options()))},t}(__WEBPACK_IMPORTED_MODULE_0_preact__.Component),_ref12=Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(__WEBPACK_IMPORTED_MODULE_3__SvgIcon__.a,{icon:"check",className:"is-context-icon"}),Selectable=function(e){var t=e.children,n=_objectWithoutProperties(e,["children"]),r=n.block,o=["radio","checkbox"].indexOf(r.typeName)>-1?r.typeName:"radio",i=["radio","checkbox","gcr","thumbs","category"].indexOf(r.typeName)>-1?r.typeName+"-wrapper "+(["gcr","thumbs","category"].indexOf(r.typeName)>-1||r.properties.show_as_buttons?"button":""):n.block.typeName+"-choice",a={onChange:function(e){n.updateForm("checkbox"!==r.typeName?e.target.value:!!e.target.checked||"",r,n.elementIndex)},type:o,name:r.typeName+"-group-"+n.block.id,value:n.value,id:r.typeName+"-"+r.id+"_"+n.selectableIndex,checked:n.checked};return n.ariaLabel&&(a["aria-label"]=n.ariaLabel),n.hasOwnProperty("onClick")&&(a.onClick=function(e){n.onClick(e)}),Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{class:i},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("input",a),Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("label",_extends({for:a.id},n.labelAtts),["gcr","category","checkbox"].indexOf(r.typeName)>-1||r.properties.show_as_buttons&&"thumbs"!==r.typeName?_ref12:null,t))},SelectList=function(e){function t(){for(var t,n,r,o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=n=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),n.state={value:[]},r=t,_possibleConstructorReturn(n,r)}return _inherits(t,e),t.prototype.render=function(e){var t=e.block,n=e.block.properties,r=["gcr","thumbs","category"].indexOf(t.typeName)>-1||n.show_as_buttons?"button-container "+e.block.typeName+"-container":"",o=n.reverseScore?Object.keys(n.elements).reverse():Object.keys(n.elements);return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{class:r},o.map(function(r,o){var i=n.elements[r],a=i.hasOwnProperty("value")?i.value:i.label,s="checkbox"===t.typeName&&i.isExtra?t.typeName+"_"+t.id+"_extra_"+i.extraKey:t.typeName+"_"+t.id+"_"+r,c=_extends({},e,{value:a,key:o,selectableIndex:o,updateForm:function(t,n,r){e.updateForm(t,n,r,"checkbox"===n.typeName&&s)},checked:"checkbox"!==t.typeName?e.elementState.value==a:e.elementState[s].value&&"false"!=e.elementState[s].value});i.hasOwnProperty("onClick")&&"function"==typeof i.onClick&&(c.onClick=i.onClick),"thumbs"===e.block.typeName&&(c.labelAtts={class:"label_thumbs_"+(0==o?"positive":"negative"),title:0==o?"positive":"negative"});var l="thumbs"===t.typeName&&t.properties.showCaptions?{style:{verticalAlign:"middle"}}:{};return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(Selectable,c,i.icon?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(__WEBPACK_IMPORTED_MODULE_3__SvgIcon__.a,_extends({icon:i.icon},l)):null,"thumbs"!==t.typeName?" "+i.label:null,Object.keys(l).length?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",l," "+i.label):null)}))},t}(__WEBPACK_IMPORTED_MODULE_0_preact__.Component),Contact=function(e){var t=_objectWithoutProperties(e,["children"]),n=t.block,r=n.properties;return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{class:"contact-wrapper"},function(){return Object.keys(r.elements).filter(function(e){return r.elements[e].show}).map(function(e){var o=r.elements[e],i=n.typeName+"_"+n.id+"_"+e,a=e.replace("2","")+"-wrapper",s="name"!=e&&o.placeholder?o.placeholder:"name"==e&&o.combine&&o.placeholder?o.placeholder:"name"!=e||o.combine?"":o.subelements.lastname.placeholder,c=_extends({},t,{elementState:_extends({},t.elementState[i]),block:_extends({},n,{field:i,isSub:!0,properties:{placeholder:s||"",elements:o.options?Object.keys(o.options).reduce(function(e,t){return e[t]={label:o.options[t]},e},{}):{}}}),field:i}),l="name"!==e||o.combine?null:_extends({},c,_extends({},c,{elementState:_extends({},t.elementState[n.typeName+"_"+n.id+"_firstname"]),block:_extends({},c.block,{field:n.typeName+"_"+n.id+"_firstname",properties:_extends({},c.block.properties,{placeholder:o.subelements.firstname.placeholder||""})}),field:n.typeName+"_"+n.id+"_firstname"}));return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{class:a},"title"===e?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",null,Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(DropDown,c),t.elementState[i].showError?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(ErrorMessage,null,t.elementState[i].error):null):null,"name"===e&&o.combine?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",null,Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(TextInput,c),t.elementState[i].showError?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(ErrorMessage,null,t.elementState[i].error):null):null,"name"!==e||o.combine?null:Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",null,Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(TextInput,l),t.elementState[n.typeName+"_"+n.id+"_firstname"].showError?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(ErrorMessage,null,t.elementState[n.typeName+"_"+n.id+"_firstname"].error):null),"name"!==e||o.combine?null:Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",null,Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(TextInput,c),t.elementState[i].showError?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(ErrorMessage,null,t.elementState[i].error):null),"name"!==e&&"title"!==e?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",null,Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(TextInput,c),t.elementState[i].showError?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(ErrorMessage,null,t.elementState[i].error):null):null)})}())},ActionButton=function(e){var t=e.children,n=_objectWithoutProperties(e,["children"]),r={class:"btn "+("submit"===n.type?"btn-primary btn-submit pull-right":"next"===n.type?"btn-next pull-right":"btn-previous")+" "+(n.class?n.class:""),id:"submit"!==n.type?"btn_"+n.type+"_"+n.id:"surveySubmitBtn",type:"button",onClick:n.onClick,style:n.style?n.style:{}};return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("button",r,t)},ExternalData=function(_Component6){function ExternalData(){for(var _temp5,_this11,_ret5,_len5=arguments.length,args=Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return _temp5=_this11=_possibleConstructorReturn(this,_Component6.call.apply(_Component6,[this].concat(args))),_this11.state={},_this11.getData=function(obj){if("string"==typeof obj&&(obj=decodeURIComponent(obj)),"object"!=typeof obj)try{obj=JSON.parse(obj)}catch(e){}var _obj=obj,key=_obj.key,type=_obj.type,value=_obj.value,id=_obj.id,returnValue="";if("css_selector"===type){var selector=void 0;try{selector=document.querySelector(value)}catch(e){}selector&&(returnValue="INPUT"===selector.nodeName?selector.value:selector.textContent)}else if("js"===type){var jsVar=void 0;try{if(value.indexOf("[*]")>-1){var _value$split=value.split("[*]"),arr=_value$split[0],_key6=_value$split[1],foundStr="";window[arr].some(function(o,i){var arrStr=arr+"["+i+"]"+_key6,test=eval(arrStr);return test&&(foundStr=arrStr),test}),jsVar=eval(foundStr)}else jsVar=eval(value)}catch(e){}if(void 0!==jsVar){if("string"!=typeof jsVar)try{jsVar=JSON.stringify(jsVar)}catch(e){}"string"==typeof jsVar&&(returnValue=jsVar)}}else if("cookie"===type){var cookieValue=Object(__WEBPACK_IMPORTED_MODULE_1__utils_Helpers__.f)(value);cookieValue&&(returnValue=cookieValue)}else if("url_parameter"===type){var urlParam=Object(__WEBPACK_IMPORTED_MODULE_1__utils_Helpers__.h)(value,_this11.context.pageSearch);urlParam&&"string"==typeof urlParam&&(returnValue=urlParam)}return returnValue},_this11.setData=function(){var e=_this11.props.block;setTimeout(function(){Object.keys(e.properties.elements).map(function(t,n){var r,o=e.properties.elements[t],i=(e.typeName+"_"+o.type+"_"+e.id+"_"+(n+1)).replace(/\W/g,"");_this11.setState((r={},r[i]=_this11.getData({type:o.type,value:o.value,id:i,key:n+1}),r),function(){_this11.props.updateForm(_this11.state[i],e,_this11.props.elementIndex,i)})})},300)},_ret5=_temp5,_possibleConstructorReturn(_this11,_ret5)}return _inherits(ExternalData,_Component6),ExternalData.prototype.componentDidMount=function(){this.setData(),document.addEventListener("mopinion_shown",this.setData)},ExternalData.prototype.componentWillUnmount=function(){document.removeEventListener("mopinion_shown",this.setData)},ExternalData.prototype.render=function(){var e=this,t=this.props.block;return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",null,Object.keys(t.properties.elements).map(function(n,r){var o=t.properties.elements[n],i=(t.typeName+"_"+o.type+"_"+t.id+"_"+(r+1)).replace(/\W/g,"");return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("input",{type:"hidden",id:i,name:i,value:e.state[i]})}))},ExternalData}(__WEBPACK_IMPORTED_MODULE_0_preact__.Component),_ref15=Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(__WEBPACK_IMPORTED_MODULE_3__SvgIcon__.a,{icon:"camera"}),_ref16=Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{class:"detect-capture"},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(__WEBPACK_IMPORTED_MODULE_3__SvgIcon__.a,{icon:"check"})),_ref17=Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",{class:"required-mark"},"*"),Screenshot=function(e){function t(){for(var t,n,r,o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=n=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),n.state={showCapture:!1,captureSet:!1},n.toggleCapture=function(e){n.setState(function(t){return{showCapture:void 0!==e?e:!t.showCapture,captureSet:void 0===e||e?t.captureSet:e}},function(){(void 0===e||e)&&n.props.toggleScreenshot()})},n.showCapture=function(){n.setState({showCapture:!0},function(){n.props.toggleScreenshot(!0)})},n.removeCapture=function(){n.setState({showCapture:!1,captureSet:!1},function(){n.props.toggleScreenshot(!1)})},n.setCapture=function(){n.setState({captureSet:!0,showCapture:!1},function(){n.props.toggleScreenshot(!1)})},r=t,_possibleConstructorReturn(n,r)}return _inherits(t,e),t.prototype.render=function(e,t){var n=this,r=e.block,o=e.block.properties,i=e.elementIndex,a=e.updateForm,s=e.text,c=e.webView,l=e.formType,p={toggleCapture:this.toggleCapture,updateForm:function(e,t){a(e,r,i,t)},block:r,setCapture:this.setCapture,showCapture:t.showCapture,removeCapture:this.removeCapture,text:s,formType:l,contentDiv:e.contentDiv};return c?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",null,Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("input",{type:"checkbox",id:"screenshot_"+r.id,onChange:function(e){n.props.updateForm(e.target.checked&&"object"==typeof window&&window.screenToken?window.screenToken:"",r,i,"screenshot_"+r.id)}}),Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("label",{for:"screenshot_"+r.id},s.screenshotCheckboxLabel)):Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{class:t.captureSet?"screen-captured":""},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{id:"screenshot_element_"+e.block.id,class:"section-screenshot "+(o.bottomScreen&&r.tooltip?"tooltip":""),onClick:function(){n.showCapture()}},_ref15,_ref16,o.bottomScreen&&r.tooltip?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",{class:"tooltip"},r.tooltip):null,o.bottomScreen&&r.required?_ref17:null,!e.formOpen&&"embed"!==l||!t.showCapture&&!t.captureSet?null:Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(__WEBPACK_IMPORTED_MODULE_2__Capture__.a,p)))},t}(__WEBPACK_IMPORTED_MODULE_0_preact__.Component),_ref18=Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("g",{"fill-rule":"evenodd","clip-rule":"evenodd"},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("path",{fill:"#C82027",d:"M116.76 19.41L20.66.7a16.78 16.78 0 0 0-20 18.04l9.67 105.6a16.76 16.76 0 0 0 21.28 14.68l95.5-26.62a16.77 16.77 0 0 0 12.1-18.7l-9.03-60.25a16.63 16.63 0 0 0-13.42-14.03zm4.27 83.78h-16.35V70.45c0-7.93-.35-18.77-10.93-18.77-12.71 0-13.93 12.7-13.93 22.38v29.13H63.47V71.92c0-9.68-1.7-15.8-5.11-18.34a9.99 9.99 0 0 0-6.18-1.9c-12.59 0-13.88 13.25-13.88 22.78v28.73H22V38.62h16.3v7.42c10.93-12.02 30.94-13.11 39.08 2.54 7.32-10.75 21.7-15.25 33.3-8.7 9.87 5.4 10.35 15.33 10.35 25.46v37.85z"}),Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("path",{fill:"#FFF",d:"M121.03 103.2H104.7V70.44c0-7.92-.36-18.77-10.94-18.77-12.7 0-13.93 12.7-13.93 22.38v29.14H63.47V71.92c0-9.67-1.7-15.8-5.1-18.34a10 10 0 0 0-6.19-1.9c-12.58 0-13.88 13.26-13.88 22.79v28.73H22V38.62h16.3v7.42c10.94-12.02 30.95-13.1 39.08 2.54 7.33-10.75 21.71-15.24 33.3-8.69 9.87 5.39 10.36 15.32 10.36 25.46v37.84z"})),Branding=(_temp7=_class8=function(e){function t(){return _possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.componentDidMount=function(){this.brandingDiv.addEventListener("blur",this.props.onBlur)},t.prototype.componentWillUnmount=function(){this.brandingDiv.removeEventListener("blur",this.props.onBlur)},t.prototype.render=function(e,t){var n=this;return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{tabindex:"0",ref:function(e){return n.brandingDiv=e}},t.brandingContent?Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",{dangerouslySetInnerHTML:{__html:t.brandingContent}}):Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("div",{id:"branding",class:"branding anim",style:{textAlign:"center"}},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("a",{href:"https://mopinion.com/?track=FormReferral",target:"_blank",class:"center-branding",style:{display:"inline-block!important"}},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",{class:"brand-text",style:{display:"inline-block!important"}},"Powered by"),Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",{class:"brand-logo",style:{display:"inline-block!important"}},Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"inline-block!important",verticalAlign:"middle"},viewBox:"0 0 140 140"},_ref18),Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)("span",{style:{display:"inline-block!important"}},"opinion")))))},t}(__WEBPACK_IMPORTED_MODULE_0_preact__.Component),_class8.defaultProps={onBlur:function(){}},_temp7),ReCaptchaWrapper=function(e){function t(){for(var t,n,r,o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=n=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),n.reCaptchaNode=null,n.request=null,n.validateCaptcha=function(e){n.request=reqwest({url:"https://"+n.context.domain+"/survey/public/validate-recaptcha",method:"post",crossOrigin:!0,data:{surveyKey:n.context.surveyKey,recaptcha:e}}).then(function(e){if(e.recaptchaValid)n.props.updateForm(!0,{},n.props.elementIndex);else try{n.reCaptchaNode.reset()}catch(e){}}).catch(function(){try{n.reCaptchaNode.reset()}catch(e){}})},n.expireCaptcha=function(){try{n.props.updateForm("",{},n.props.elementIndex)}catch(e){}},r=t,_possibleConstructorReturn(n,r)}return _inherits(t,e),t.prototype.render=function(e){var t=this,n={ref:function(e){return t.reCaptchaNode=e},sitekey:e.surveyProperties.advanced.recaptcha.siteKey,onChange:function(e){return t.validateCaptcha(e)},onExpired:function(e){return t.expireCaptcha(e)}};return Object(__WEBPACK_IMPORTED_MODULE_0_preact__.h)(__WEBPACK_IMPORTED_MODULE_4__ReCaptcha__.a,n)},t}(__WEBPACK_IMPORTED_MODULE_0_preact__.Component)},JkW7:function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=t.genID,r=t.show_as_panels,o=function(){return r?"inline-block":"block"},i=Object(B.c)(e,function(e){return e.field==="thanks-page_"+n});if(-1!==i){return e[i].isVisible?o():"none"}return o()}function a(e,t,n){if("checkbox"!==n.typeName)return e.value===t.valueLabel;if(t.hasOwnProperty("linkedLabel")){return e.validateExtraFields.filter(function(n){var r=e[n];if(r.hasOwnProperty("linkedField")){var o=e[r.linkedField];return t.linkedLabel===r.valueLabel&&o.value&&"false"!==o.value}}).length>0}}function s(e){return e.split(".").reduce(function(e,t){return e[t]},re)}function c(e,t){re[e]=t,ne.set("__mIndexedCss",ee({},re),604800)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];setTimeout(function(){var e=document.querySelector("html").lang||"en";t.querySelector("html").setAttribute("lang",e),n.filter(function(e){return"outer"!==e.scope}).forEach(function(e){return Object(B.b)(e.url,{doc:t})}),o||Object(B.k)(r,t)})}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function C(e,t){if(t)return{type:t,position:"slide"==t?"bottom-right":"modal"==t?"right":""};var n=e.trigger;return n.hasOwnProperty("slider")&&n.slider.hasOwnProperty("type")&&e.modal?{type:"slide",position:n.slider.position}:e.modal?{type:"modal",position:n.button.position}:{type:"embed"}}function M(e){var t=e.children,n=e.useDiv,r=w(e,["children","useDiv"]);return n?Object(N.h)(D,r,t):Object(N.h)(pe,r,t)}function D(e){var t=e.children,n=e.style,r=e.width,o=e.height,i=w(e,["children","style","width","height"]),a={id:"surveyWindow",class:"surveyWindow "+(i.class?i.class:""),style:{width:r||"100%",height:o||0,border:"none",borderRadius:"2px",background:"rgba(255,255,255,0.01)",transition:"all .2s",overflow:"hidden"},ref:function(e){return i.setRef(e)}};return"object"==typeof n&&be(a.style,n),Object(N.h)("div",a,t)}function S(){if(Ee){var e;(e=console).log.apply(e,arguments)}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var N=n("KM04"),R=(n("VqYD"),n("I2Md")),B=n("fkUE"),K=n("lqzJ"),U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W=Object(N.h)(K.a,{icon:"refresh",className:"is-refresh-icon"}),F=Object(N.h)(K.a,{icon:"paper-plane-o",className:"is-context-icon"}),q=Object(N.h)(K.a,{icon:"angle-right",className:"is-context-icon"}),V=Object(N.h)(K.a,{icon:"angle-left",className:"is-context-icon"}),H=Object(N.h)(K.a,{icon:"refresh",className:"is-refresh-icon"}),z=Object(N.h)(K.a,{icon:"paper-plane-o",className:"is-context-icon"}),Y=Object(N.h)(K.a,{icon:"angle-left",className:"is-context-icon"}),G=Object(N.h)(K.a,{icon:"angle-right",className:"is-context-icon"}),X=function(e){function t(t){var n=r(this,e.call(this,t));return n.state={class:""},n}return o(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this;e.noErrorsOnLastPage&&!this.props.noErrorsOnLastPage&&this.setState({isSubmitting:!0},function(){setTimeout(function(){t.props.formIsCompleted||t.setState({isSubmitting:!1})},2e3)})},t.prototype.blocks=function(){var e=this;return this.props.elements.map(function(t,n){var r,o=e.props.blocks[t.label],i=e.props.elements[n],s={key:o.id,class:o.typeName+" "+("rating"!==o.typeName?o.typeName:"")+"-group "+o.typeName+"-group-"+i.typeCount+" "+(o.tooltip?"has-tooltip":"")+" ",elementState:i,groupIndex:n,show:!(["website_data"].indexOf(o.typeName)>-1)&&i.isVisible,id:o.typeName+"-"+o.id},c=(r={updateForm:function(t,n,r,o){e.props.updateForm({value:t},n,r,o)},block:o,elementState:i,elementIndex:i.elementIndex,setPage:function(t,n){e.props.setPage(t,n)},closeForm:e.props.closeForm,contentDiv:e.props.contentDiv,toggleScreenshot:function(t){e.props.toggleScreenshot(t)},formOpen:e.props.formOpen},r.closeForm=function(){e.props.closeForm()},r.text=e.props.config.text,r.surveyProperties=e.props.config.properties,r.surveyKey=e.props.config.surveyKey,r.webView=e.props.webView,r.formType=e.props.formType,r);o.properties.option_extra&&Object.keys(o.properties.elements_extra);return t.page!=e.props.pageNumber||"screenshot"===o.typeName&&o.properties.bottomScreen&&!e.props.webView?null:Object(N.h)(R.g,s,Object(N.h)(R.h,{required:t.required,block:o},o.title),"textarea"===o.typeName?Object(N.h)(R.q,c):"input"===o.typeName?Object(N.h)(R.q,c):"radio"===o.typeName?Object(N.h)(R.p,c):"checkbox"===o.typeName?Object(N.h)(R.p,c):"select"===o.typeName?Object(N.h)(R.d,c):"rating"===o.typeName?Object(N.h)(R.l,c):"nps"===o.typeName?Object(N.h)(R.l,c):"ces"===o.typeName?Object(N.h)(R.l,c):"gcr"===o.typeName?Object(N.h)(R.p,c):"thumbs"===o.typeName?Object(N.h)(R.p,c):"category"===o.typeName?Object(N.h)(R.p,c):"contact"===o.typeName?Object(N.h)(R.c,c):"link"===o.typeName?Object(N.h)(R.i,c):"likert"===o.typeName?Object(N.h)(R.j,c):"matrix"===o.typeName?Object(N.h)(R.j,c):"screenshot"===o.typeName?Object(N.h)(R.n,c):"website_data"===o.typeName?Object(N.h)(R.f,c):"section_break"===o.typeName?Object(N.h)(R.o,c):"recaptcha"===o.typeName?Object(N.h)(R.m,c):"multimedia"===o.typeName?Object(N.h)(R.k,c):null,o.properties.option_extra&&Object.keys(o.properties.elements_extra).length?Object.keys(o.properties.elements_extra).map(function(t){var n=o.properties.elements_extra[t];n.typeName||(n.typeName="input");var r=o.typeName+"_"+o.id+"_extra_"+t,s=U({},c,{updateForm:function(t,n,r,o){e.props.updateForm({value:t},n,r,o)},elementState:i[o.typeName+"_"+o.id+"_extra_"+t],field:r,block:{placeholder:n.placeholder||"",properties:{placeholder:n.placeholder||""}}});return Object(N.h)("div",{style:{display:a(i,n,o)?"block":"none",marginTop:5}},"input"===n.typeName?Object(N.h)(R.q,s):null)}):null,i.showError&&"contact"!==o.typeName?Object(N.h)(R.e,null,i.error):null)})},t.prototype.buttons=function(){var e=this.state.isSubmitting,t=this.props,n=t.pageNumber,r=t.breakBlock,o=t.config,i=o.text,a=o.pageMap,s=o.properties.advanced,c=t.setPage,l=t.validateAndPost,p=r.nextLabel||"Next",u=r.prevLabel||"Back",d=1==n,_=Object.keys(a).slice(-1).pop()==n,f={display:!r.autoPost||r.autoPost&&r.didAutoPost?"inline-block":"none"};s.hideNavigation&&(f.display="none");var h={display:!r.autoPost||r.autoPost&&r.didAutoPost?"inline-block":"none"},m={display:"inline-block"};return s.hideSubNavigation&&(h.display="none",m.display="none"),d&&_?Object(N.h)("div",{class:"form-actions"},Object(N.h)(R.a,{type:"submit",class:e?"is-submitting":"",onClick:function(){l()},style:f},e?W:Object(N.h)("div",null,i.btnSubmitText," ",F))):d?Object(N.h)("div",{class:"form-actions"},Object(N.h)(R.a,{type:"next",id:r.id,onClick:function(){c()},style:h},p," ",q)):_?Object(N.h)("div",{class:"form-actions"},Object(N.h)(R.a,{type:"prev",id:r.id,onClick:function(){c(!1)},style:m},V," ",i.btnLastBackText),Object(N.h)(R.a,{type:"submit",class:e?"is-submitting":"",onClick:function(){l()},style:f},e?H:Object(N.h)("div",null,i.btnSubmitText," ",z))):Object(N.h)("div",{class:"form-actions"},Object(N.h)(R.a,{type:"prev",id:r.id,onClick:function(){c(!1)},style:m},Y," ",u),Object(N.h)(R.a,{type:"next",id:r.id,onClick:function(){c()},style:h},p," ",G))},t.prototype.render=function(e){var t=this,n=e.pageNumber,r=e.isActivePage;return Object(N.h)("div",{id:"page"+n,style:r?{display:"block"}:{display:"none"},ref:function(e){return t.page=e}},this.blocks(),this.buttons())},t}(N.Component),J=Object(N.h)("div",{class:"completed-anim do-anim"},Object(N.h)(K.a,{icon:"check"})),$=function(e){function t(){for(var t,n,o,a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return t=n=r(this,e.call.apply(e,[this].concat(s))),n.blocks=function(){var e=n.props,t=e.elements,r=e.isFirstPage,o=e.surveyKey,a=e.startSurvey,s=e.closeForm,c=e.formElements,l={startSurvey:a,closeForm:s,surveyKey:o,surveyProperties:""},p=Object.keys(t).filter(function(e){return t[e].show_as_panels}).length,u=r?"intro-page":"thanks-page";return Object.keys(t).map(function(e){var n=t[e],r=n.type,o=void 0!==n.genID?n.genID:e,a=U({},l,{block:{id:n.genID,properties:{linktype:"link"!==n.use_as?"function":"link",linktype_function:n.use_as,plaintext:n.value,description:n.value,hyperlinktext:n.hyperlinktext,show_as_buttons:n.show_as_buttons,show_as_panels:n.show_as_panels,icon:n.icon,iconAlignment:n.icon_align,hyperlinkhref:n.hyperlinkhref}}}),s=n.show_as_panels?"panel-wrap":n.show_as_buttons?"btn-wrap":"",d="img"===n.type?"img-"+n.layout:"",_={textAlign:n.align,display:i(c,n),width:n.show_as_panels?1===p?"100%":p%2==0?"50%":"33%":"auto"};return Object(N.h)("div",{className:"custom-section custompage-"+r+" "+s+" "+d,id:u+"_"+o,style:_},"text"===r?n.value:"icon"===r?Object(N.h)(K.a,{icon:n.icon}):"link"===r?Object(N.h)(R.i,a):"img"===r?Object(N.h)("img",{src:n.url,style:{height:"static"==n.layout?n.height:"auto",width:"static"==n.layout?n.width:"100%"}}):null)})},o=t,r(n,o)}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.isFirstPage,n=this.context.config;return t?Object(N.h)("div",{className:"front-page",id:"frontPage"},this.blocks()):"object"==typeof this.props.elements?Object(N.h)("div",{class:"last-page",id:"lastPage"},this.blocks()):Object(N.h)("div",{class:"last-page",id:"lastPage"},J,Object(N.h)("span",{dangerouslySetInnerHTML:{__html:n.properties.exit_content}}))},t}(N.Component),Q=n("q6qL"),Z=n.n(Q),ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te=function(){var e="___test_storage";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}(),ne=te?{get:function(e){var t=localStorage.getItem(e);if(null!=t){var n=JSON.parse(t);if(null!=n.payload&&null!=n.expiry){if(new Date>Date.parse(n.expiry))return localStorage.removeItem(e),null}return JSON.parse(t).payload}return{}},set:function(e,t,n){var r=new Date;r.setSeconds(r.getSeconds()+n),localStorage.setItem(e,JSON.stringify({payload:t,expiry:r}))}}:{set:function(){},get:function(){}},re=te?ee({},ne.get("__mIndexedCss")):{},oe=n("9yYZ"),ie=n.n(oe),ae=function(e){function t(){return l(this,t),p(this,e.apply(this,arguments))}return u(t,e),t.prototype.render=function(e,t,n){var r=n.css,o=n.surveyKey,i=n.themeName;return 0===Object.keys(r).length?null:Object(N.h)("style",null,r.base&&r.base,r[i]&&r[i],r[o])},t}(N.Component),se=ae,ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le=Object(N.h)(se,null),pe=function(e){function t(){var n,r,o;d(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=_(this,e.call.apply(e,[this].concat(a))),r.updateOnLoad=function(){r.key=Object(B.p)(),r.props.refresh&&r.props.refresh(),r.forceUpdate()},r.content=function(){return Object(N.h)("div",null,Object(N.h)("style",null,"html,body {margin:0;padding:0;overflow:hidden};"),le,r.props.children)},o=n,_(r,o)}return f(t,e),t.prototype.componentWillMount=function(){this.key=Object(B.p)()},t.prototype.componentDidMount=function(){var e=this,t=this.props.setRef;if(this.iframe&&this.iframe.contentDocument){var n=this.props.config.properties.advanced,r=n.analytics_integration,o=void 0===r?{}:r,i=n.block_webfont_loading,a=void 0!==i&&i;h(document,this.iframe.contentDocument,this.context.styleSheets,this.context.customScripts,this.context.webFonts,o,a),this.iframe.contentWindow.document.open("text/html","replace"),this.iframe.contentWindow.document.write("<!DOCTYPE html><html><head></head><body></body></html>"),this.iframe.contentWindow.document.close(),t&&t(this.iframe),setTimeout(function(){e.iframe.addEventListener("load",function(t){t.target||e.updateOnLoad()})},1e3)}},t.prototype.componentWillUnmount=function(){var e=this;setTimeout(function(){e.nextBase=null}),this.iframe.removeEventListener("load",this.updateOnLoad)},t.prototype.shouldComponentUpdate=function(e){return!Object(B.r)(e,this.props)},t.prototype.render=function(e){var t=this,n={ref:function(e){return t.iframe=e},id:"surveyWindow",class:"surveyWindow "+(this.props.class?this.props.class:""),style:{width:e.width?e.width:"100%",height:e.height?e.height:0,border:"none",borderRadius:"2px",background:"rgba(255,255,255,0.01)",transition:"all .2s",overflow:"hidden",willChange:"height"},title:this.props.config.properties.title+" feedback form",allowtransparancy:"true",frameBorder:"false",key:this.key};return"object"==typeof e.style&&ce(n.style,e.style),Object(N.h)("iframe",n,this.iframe&&this.iframe.contentDocument?Object(N.h)(Z.a,{into:this.iframe.contentDocument.body,ref:function(e){return t._portal=e}},this.content()):null)},t}(N.Component),ue=function(e){function t(){return m(this,t),b(this,e.apply(this,arguments))}return v(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(e){return Object(N.h)("iframe",e)},t}(N.Component),de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e=navigator.userAgent.match(/Trident/),fe={position:"absolute",left:0,top:"-100%",width:"100%",height:"100%",margin:"1px 0 0",border:"none",opacity:"0",pointerEvents:"none",overflow:"hidden",zIndex:-1},he=function(e){function t(){var n,r,o;g(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=O(this,e.call.apply(e,[this].concat(a))),r.state={},r.handleResize=function(){try{r.props.onResize({height:r.div.scrollHeight,width:r.div.scrollWidth})}catch(e){}},o=n,O(r,o)}return E(t,e),t.prototype.componentWillMount=function(){this.key=Object(B.p)()},t.prototype.componentWillUnmount=function(){var e=this;setTimeout(function(){e.nextBase=null})},t.prototype.render=function(){var e=this,t={style:de({},fe),ref:function(t){return e.div=t}};return"pointerEvents"in document.body.style||(t.style.visibility="hidden"),Object(N.h)("div",t,Object(N.h)(me,{resize:this.handleResize,key:this.key}))},t}(N.Component),me=function(e){function t(){var n,r,o;g(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=O(this,e.call.apply(e,[this].concat(a))),r.onLoad=function(){r.object.contentDocument.defaultView.addEventListener("resize",r.handleResize),r.handleResize()},r.handleResize=function(){r.props.resize&&r.props.resize()},o=n,O(r,o)}return E(t,e),t.prototype.componentWillUnmount=function(){var e=this;setTimeout(function(){e.nextBase=null})},t.prototype.componentDidMount=function(){var e=this;_e&&(this.object.data="about:blank"),this.object&&this.object.contentDocument&&this.object.contentDocument.defaultView&&setTimeout(function(){e.onLoad()})},t.prototype.render=function(){var e=this,t={style:de({},fe),ref:function(t){return e.object=t},type:"text/html",onLoad:this.onLoad};return _e||(t.data="about:blank"),Object(N.h)("object",t)},t}(N.Component),be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye=function(e,t){try{return t>e[0]?e[1]:e[1]*(t/e[0])}catch(e){return 0}},ve=Object(N.h)(K.a,{icon:"check"}),ge=Object(N.h)(se,null),Oe=function(e){function t(n){j(this,t);var r=k(this,e.call(this,n));return r.resizer=Object(B.u)(function(){r.setFormWidth()},150),r._getFormType=function(){return r.state.type},r.escapeButton=function(e){27===e.keyCode&&r.state.formOpen&&r.toggleForm()},r.refreshIframe=function(){r.setState({type:"embed"},function(){r.setState({type:C(r.props.config.properties,r.props.forceType).type})})},r.toggleScreenshot=function(e){var t=r.state.type,n=document.querySelector("html"),o=document.body,i="slide"==t?"mopinion-slider-active":"mopinion-modal-active";r.setState(function(t){return{screenshotActive:void 0!==e?e:!t.screenshotActive}},function(){"embed"!==t&&(r.state.screenshotActive?Object(B.o)([n,o],i):Object(B.a)([n,o],i))})},r.state=be({},C(n.config.properties,n.forceType),{formOpen:!1,intro:0,last:0,screenshotActive:!1,screenshotTaken:!1,formWidth:"40%",allowButton:n.showButton,pageHeight:0,displayNone:!0}),r.contentDiv=null,r.iframe=null,r.resizeObserver=null,r.formWidth=0,r.showTimer=null,r.windowKey=Object(B.d)(10),r.forceDiv=n.config.properties.advanced.modalUseDiv||1==Object(B.f)("ForceModalDiv"),r}return P(t,e),t.prototype.setFormWidth=function(){var e=this.state.type,t=window.innerWidth,n="slide"===e?"425px":"40%";t>992&&t<1201?n="slide"===e?"400px":"45%":t<993&&t>768?n="slide"===e?"360px":"50%":t<769&&t>544?n="slide"===e?"320px":"70%":545>t&&(n="slide"===e?"260px":"90%"),n!==this.state.formWidth&&this.setState({formWidth:n})},t.prototype.componentDidMount=function(){var e=this,t=this.state.type,n=this.props,r=n.config,o=n.config.properties,i=n.forceOpen;"embed"===t&&Object(B.v)({event:"loaded",key:r.surveyKey,formName:o.name}),Object(B.v)({event:"ready",key:r.surveyKey,formName:o.name}),i&&(this.showTimer=setTimeout(function(){e.toggleForm(!0)},200)),this.setFormWidth(),window.addEventListener("resize",this.resizer)},t.prototype.componentDidUpdate=function(e){e.forceType!==this.props.forceType&&this.refreshIframe()},t.prototype.componentWillUnmount=function(){var e=this;setTimeout(function(){e.nextBase=null}),window.removeEventListener("resize",this.resizer);try{this.iframe&&this.iframe.contentDocument.removeEventListener("keydown",this.escapeButton)}catch(e){}try{clearTimeout(this.showTimer)}catch(e){}},t.prototype.componentWillReceiveProps=function(e){var t=this;e.forceOpen&&!this.props.forceOpen&&(this.showTimer=setTimeout(function(){t.toggleForm(!0)},200)),e.forceType&&e.forceType!==this.props.forceType&&this.setState(function(t){return be({},t,C({},e.forceType),{formOpen:!1})},function(){t.setFormWidth()}),e.formIsCompleted&&!this.props.formIsCompleted&&this.props.config.properties.timeout&&-1!==this.props.config.properties.timeout&&setTimeout(function(){"embed"!==t.state.type?t.toggleForm(!1):t.props.clearForm(t.props.config.surveyKey)},this.props.config.properties.timeout),e.showButton&&!this.props.showButton&&setTimeout(function(){t.setState({allowButton:!0})},100)},t.prototype.toggleForm=function(e){var t=this,n=this.props,r=n.config,o=n.config.properties,i=n.triggerMethod,a=n.cookieTime,s=this.state.type,c=this.context.track;Object(B.v)({event:void 0!==e||this.state.formOpen?void 0===e&&this.state.formOpen?"will_hide":e?"will_show":"will_hide":"will_show",key:r.surveyKey,formName:o.name,triggerMethod:i}),this.setState(function(t){return{formOpen:void 0===e?!t.formOpen:e}},function(){var e=document.querySelector("html"),n=document.body,l="slide"==t.state.type?"mopinion-slider-active":"mopinion-modal-active";if(t.state.formOpen){"embed"!==s&&Object(B.a)([e,n],l),Object(B.q)("MSopened",r.surveyKey,a),Object(B.q)("MSopened."+r.surveyKey,!0,a),setTimeout(function(){try{t.iframe.focus({preventScroll:!0})}catch(e){}},200);try{t.iframe&&t.iframe.contentDocument.addEventListener("keydown",t.escapeButton)}catch(e){}}else"embed"!==s&&Object(B.o)([e,n],l),t.props.onClose&&t.props.onClose();var p={event:t.state.formOpen?"shown":"hidden",key:r.surveyKey,formName:o.name,triggerMethod:i};Object(B.v)(p),c("Form "+(t.state.formOpen?"shown":"hidden"),{trigger_method:t.props.triggerMethod,form_completion_percentage:t.props.formCompletionPercentage,active_page:t.props.activePage,page_count:t.props.pageCount,form_type:t.state.type,subdomain:t.context.domain,organisation_id:r.properties.organisation_id,project_id:r.properties.project_id})})},t.prototype.shouldComponentUpdate=function(e,t){return!(Object(B.r)(e,this.props)&&Object(B.r)(t,this.state))},t.prototype.setDimensions=function(e){var t=e.height,n=e.width;this.formWidth=n,this.setState(function(){return{pageHeight:t,pageWidth:n}})},t.prototype.pages=function(){var e=this,t=this.props,n=t.elements,r=t.blocks,o=t.config,i=t.activePage,a=t.breakBlocks,s=t.setPage,c=t.updateForm,l=t.updateFormSub,p=t.validateAndPost,u=t.formIsCompleted,d=t.noErrorsOnLastPage,_=t.webView,f=this.state.type;Object.keys(o.pageMap).slice(-1).pop();return Object.keys(o.pageMap).map(function(t){var h=i===Number(t),m={elements:n.filter(function(e){return e.page==t}),breakBlock:a.hasOwnProperty(t)?a[t]:{},config:o,blocks:r,activePage:i,isActivePage:h,pageNumber:t,key:t,setPage:function(e,t){s(e,t)},updateForm:function(e,t,n,r){c(e,t,n,r)},updateFormSub:function(e,t,n,r,o){l(e,t,n,r,o)},validateAndPost:function(){p()},contentDiv:e.contentDiv,toggleScreenshot:function(t){e.toggleScreenshot(t)},formOpen:e.state.formOpen,formIsCompleted:u,noErrorsOnLastPage:d,closeForm:function(){e.toggleForm(!1)},startSurvey:function(){e.startSurvey()},webView:_,formType:f};return Object(N.h)(X,m)})},t.prototype.getWrapStyle=function(){var e=this.state,t=e.position,n=e.type,r=e.formOpen,o={position:"fixed",zIndex:2000000001,backfaceVisibility:"hidden",transition:"transform .3s, visibility .225s","backface-visibility":"hidden"};if("slide"===n){if("right"===t){var i;be(o,(i={top:"10%"},i.top="calc(10% + 5px)",i.bottom="auto",i.left="auto",i.right=0,i.transform=r?"translateX(0)":"translateX(100%)",i))}else if("bottom-right"===t)be(o,{top:"auto",bottom:"-5px",left:"auto",right:"2.5%",transform:r?"translateY(0)":"translateY(100%)"});else if("bottom-left"===t)be(o,{top:"auto",bottom:"-5px",left:"2.5%",right:"auto",transform:r?"translateY(0)":"translateY(100%)"});else if("left"===t){var a;be(o,(a={top:"10%"},a.top="calc(10% + 5px)",a.left=0,a.right="auto",a.transform=r?"translateX(0)":"translateX(-100%)",a))}o.width=this.state.formWidth}else be(o,{top:0,left:0,right:0,bottom:0,overflowY:"auto","-webkit-overflow-scrolling":"touch",backfaceVisibility:"hidden",width:"100%",minHeight:"100%",visibility:r?"visible":"hidden",pointerEvents:r?"auto":"none",zIndex:r?2000000001:-1});return o},t.prototype.wrap=function(){var e=this,t=this.props,n=t.config,r=this.state,o=r.formOpen,i=r.screenshotActive,a=this.context.text,s=navigator.userAgent.match(/(iPod|iPhone|iPad)/i);return"slide"===this.state.type?Object(N.h)("div",{class:"mopinion-survey-content "+(n.properties.advanced.wcag?"wcag":""),"data-mop-form-type":this.state.type},Object(N.h)("div",{ref:function(t){return e.wrapRef=t},id:"surveyWindowWrap",class:"surveyWindowWrap mopinion-slider slide-"+this.state.position+" "+(o?"mopinion-slider-active":"")+" "+(i?"screen-capture-active":""),"data-parent-for":n.surveyKey,style:this.getWrapStyle()},Object(N.h)("div",{class:"surveySliderScroller",id:"surveySliderScroller",style:{maxHeight:"80vh",overflowY:"auto","-webkit-overflow-scrolling":"touch","-ms-overflow-style":"-ms-autohiding-scrollbar"}},Object(N.h)(M,{height:this.state.pageHeight,ref:function(t){return e.frame=t},class:i?"screen-capture-active":"",config:this.props.config,refresh:this.refreshIframe,setRef:function(t){return e.iframe=t},useDiv:s||this.forceDiv,key:this.windowKey},Object(N.h)("div",{id:"surveyBody",style:{overflow:"hidden"},class:"mopinion-slide",ref:function(t){return e.surveyBody=t}},Object(N.h)("a",{ref:function(t){return e.closeButton=t},id:"closeModalBtn",title:a.closeBtnTitle,"aria-label":a.closeBtnTitle,class:"close-modal "+(n.properties.advanced.wcag?"wcag":""),href:"javascript:;",onClick:function(){e.toggleForm()}}),this.inner()))),this.button())):"modal"===this.state.type?Object(N.h)("div",{class:"mopinion-survey-content","data-mop-form-type":this.state.type},Object(N.h)("div",{ref:function(t){return e.wrapRef=t},id:"surveyWindowWrap",class:"surveyWindowWrap "+(i?"screen-capture-active":""),"data-parent-for":n.surveyKey,style:this.getWrapStyle(),onClick:function(t){t.target.isEqualNode(e.wrapRef)&&e.toggleForm()}},Object(N.h)(M,{width:this.state.formWidth,height:this.state.pageHeight,style:{position:"absolute",top:"50px",left:0,right:0,marginLeft:"auto",marginRight:"auto",maxWidth:"480px",marginBottom:50,boxShadow:"0 8px 17px 0 rgba(0,0,0,0.2)",background:"rgb(255,255,255)",transition:"transform .225s, opacity .225s, height .175s",transform:o?"scale(1)":"scale(.95)",opacity:o?1:0},class:i?"screen-capture-active":"",ref:function(t){return e.frame=t},config:this.props.config,refresh:this.refreshIframe,setRef:function(t){return e.iframe=t},useDiv:this.forceDiv,key:this.windowKey},Object(N.h)("div",{id:"surveyBody",style:{overflow:"hidden"},ref:function(t){return e.surveyBody=t}},Object(N.h)("a",{ref:function(t){return e.closeButton=t},id:"closeModalBtn",title:a.closeBtnTitle,"aria-label":a.closeBtnTitle,class:"close-modal "+(n.properties.advanced.wcag?"wcag":""),href:"javascript:;",onClick:function(){e.toggleForm()}}),this.inner())),Object(N.h)("div",{style:s?{height:"calc(100vh + 1px)"}:{}})),this.button(),Object(N.h)(Z.a,{into:"body",ref:function(t){return e.surveyMaskPortal=t}},Object(N.h)("div",{ref:function(t){return e.surveyMask=t},"data-mask-for":n.surveyKey,class:"mopinion-survey-mask "+(i?"screen-capture-active":"")+" "+(n.properties.advanced.wcag?"wcag":""),id:"surveyMask",style:{pointerEvents:o?"auto":"none",opacity:o?.15:0,visibility:o?"visible":"hidden",transition:"opacity .225s, visibility .225s",zIndex:o?"":-1}}))):Object(N.h)("div",{"data-mop-form-type":this.state.type},this.inner())},t.prototype.progress=function(){var e=this.props,t=e.config,n=e.config.properties.advanced,r=e.formCompletionPercentage,o=e.activePage,i=e.pageCount;return n.showProgressbar&&!n.toggleDotview?Object(N.h)("div",{id:"progress",class:"progress bar-layout"},Object(N.h)("div",{id:"progressBar",class:"bar",style:{width:r+"%"}})):n.showProgressbar&&n.toggleDotview?Object(N.h)("div",{class:"progress dot-layout",id:"progress"},Object.keys(t.pageMap).map(function(e){return Object(N.h)("div",{style:{width:Math.floor(100/(i-1))+"%"},class:"progress-wrap "+(o>Number(e)?"completed":"")+" "+(e==o?"active":"")+" "+(e==i?"last":""),"data-pagecount":e},Object(N.h)("div",{class:"progress-dot"},o>Number(e)?ve:e))})):void 0},t.prototype.globalScreenshot=function(){var e=this,t=this.props.elements.filter(function(e){return"screenshot"===e.type})[0],n=this.props.config.blocks[t.id],r={class:n.typeName+" "+n.typeName+"-group "+(n.tooltip?"has-tooltip":"")+" "+("screenshot"===n.typeName&&n.properties.bottomScreen?"section absolute":""),elementState:t,show:t.isVisible,id:n.id},o={updateForm:function(t,n,r,o){e.props.updateForm({value:t},n,r,o)},block:n,elementState:t,elementIndex:t.elementIndex,setPage:this.props.setPage,contentDiv:this.contentDiv,toggleScreenshot:function(t){e.toggleScreenshot(t)},formOpen:this.state.formOpen,text:this.props.config.text,formType:this.state.type};return Object(N.h)(R.g,r,Object(N.h)(R.n,o))},t.prototype.publicLandingPageFrame=function(){var e=this,t=this.props.config.properties.advanced,n=void 0===t?{}:t,r=this.state.hideLandingPageForm,o=Object(B.g)("mail_url",this.context.pageUrl)||n.landingspageUrl,i=document.querySelector("#publicSurveyBody")?"#publicSurveyBody":"body",a=n.landingspageTheme?n.landingspageTheme:"dark";if(!n.enableCustomBackground||!o.match(/^(?:(?:https?):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/gi))return null;var s={src:o,id:"mailUrl",class:"bg__mailing_Iframe",style:r?{zIndex:1}:{}},c={class:"close_custom_bg "+a,onClick:function(){e.setState({hideLandingPageForm:!0}),Object(B.o)([document.querySelector(i)],a)},href:"javascript:;"};return Object(B.a)([document.querySelector(i)],"customBackground"),Object(B.a)([document.querySelector(i)],a),n.landingspageTransparency&&Object(B.a)([document.querySelector(i)],"transparent"),Object(N.h)(Z.a,{into:i},Object(N.h)("div",null,Object(N.h)(ue,s),r?null:Object(N.h)("a",c,n.landingspageClose?Object(N.h)("span",{class:"close_custom_bg_lbl "+a},n.landingspageClose):null)))},t.prototype.inner=function(){var e=this,t=this.state,n=t.type,r=t.formOpen,o=t.logoLoaded,i=this.props,a=i.elements,s=i.formIsCompleted,c=i.formIsOnOpenerPage,l=i.config,p=i.config.properties,u=i.screenshotOnAllPages,d=i.webView,_=i.webviewShowHeader,f=i.activePage,h=i.isPublicLandingPage,m=i.startSurvey,b={class:"mopinion-survey-output "+this.context.themeName+" "+("slide"==n?"mopinion-slide":"")+" "+("modal"==n?"is-modal":"")+" "+("embed"!=n||d?"":"is-embed")+" on-"+(s?"page-thanks":c?"page-intro":"page-"+f)+" ","data-key":this.props.config.surveyKey,ref:function(t){return e.wrapperNode=t},style:{position:"relative"}},y={closeForm:function(){e.toggleForm(!1)},startSurvey:function(){m()},surveyKey:this.props.config.surveyKey};return"embed"!==n&&(b["data-mop-page-url"]=this.context.pageUrl),Object(N.h)("div",{class:"mopinion-survey-content notranslate "+(p.advanced.wcag?"wcag":""),ref:function(t){return e.contentDiv=t},tabIndex:-1},Object(N.h)("div",b,"embed"!==n||h||d&&_?Object(N.h)("div",{id:"surveyHead"},p.logo?Object(N.h)("img",{onLoad:function(){e.setState({logoLoaded:!0})},style:o?{transition:"opacity .3s",opacity:1}:{transition:"opacity .3s",opacity:0,height:ye(p.logoSize,this.formWidth)},src:r||o?p.logo:""}):null,Object(N.h)("div",{id:"surveyTitle",tabindex:"0",title:s?l.text.lastPageTitle:p.title,class:"srv-title main-title"},Object(N.h)("h1",null,s?l.text.lastPageTitle:p.title))):null,s||c||!p.advanced.showProgressbar?null:this.progress(),s||c?s?Object(N.h)($,be({},p.thanksPage,y,{isLastPage:!0,formElements:a})):Object(N.h)($,be({},p.introPage,y,{isFirstPage:!0})):this.pages(this.wrapper),s||c||!u||d?null:this.globalScreenshot()),"embed"!==n||h||d?Object(N.h)(R.b,{brandingContent:l.branding,onBlur:function(){try{e.closeButton.focus()}catch(e){}}}):null,Object(N.h)(he,{onResize:function(t){return e.setDimensions(t)}}))},t.prototype.button=function(){var e=this,t=this.props,n=t.showButton,r=t.config,o=t.config.properties.trigger.button,i=this.state.allowButton,a={type:"button",id:"slide"==this.state.type?"surveySliderBtn":"",class:"slide"==this.state.type?"btn btn-open-slider "+this.context.themeName+" "+(i?"allow-button":"")+"  "+(r.properties.advanced.wcag?"wcag":""):"btn-open-survey btn btn-primary tab tab-"+this.state.position+" "+this.context.themeName+" "+(i?"allow-button":"")+"  "+(r.properties.advanced.wcag?"wcag":""),"data-button-for":this.props.config.surveyKey,title:r.text.btnOpenText,tabIndex:0,onClick:function(){e.toggleForm()},style:{opacity:i?1:0,visibility:i?"visible":"hidden"}};return i&&n?Object(N.h)("button",a,o.icon?Object(N.h)(K.a,{icon:""+o.icon}):null,r.text.btnOpenText&&"slide"!==this.state.type?Object(N.h)("span",null,r.text.btnOpenText):null):null},t.prototype.render=function(e,t){var n=e.isPublicLandingPage,r=t.hideLandingPageForm,o=void 0!==r&&r;return Object(N.h)("div",{"data-mop-page-url":this.context.pageUrl},ge,o?null:this.wrap(),n?this.publicLandingPageFrame():null)},t}(N.Component),Ee=1==Object(B.f)("MopinionDebug"),we=S,je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke=function e(t){var n=this;T(this,e),this.send=function(e,t){n.metrics&&n.sendMetrics(e,t),n.ga&&n.sendGa(e)},this.sendFeedback=function(e){n.ga&&n.gaSendFeedback&&n.sendFeedbackGa(e)},this.sendMetrics=function(e,t){Object(B.f)("SQsession")||Object(B.q)("SQsession",Object(B.d)(),.5/24),setTimeout(function(){var r={project_token:n.surveyKey,datetime:new Date((new Date).getTime()-6e4*(new Date).getTimezoneOffset()).toISOString(),session:Object(B.f)("SQsession"),url:window.location.href,url_title:document.title,url_referrer:document.referrer,host:window.location.hostname,user_agent:navigator.userAgent,browser_language:navigator.language||navigator.userLanguage,viewport:window.innerWidth+"x"+window.innerHeight,Dextra:{eventName:e,eventProps:je({},t)}};we("Send Metrics",r),ie()({url:"https://metrics.mopinion.com/datapoints",method:"post",crossOrigin:!0,headers:{"Content-Type":"application/json"},data:JSON.stringify(r)}).then(function(e){return we(e)}).catch(function(e){return we(e)})},300)},this.initGa=function(){n.useGtag?void 0===window.gtag?Object(B.b)("https://www.googletagmanager.com/gtag/js?id="+n.gaId,{onLoad:function(){window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",n.gaId,{send_page_view:!1})}}):gtag("config",n.gaId,{send_page_view:!1}):void 0===window.ga?(!function(e,t,n,r,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",a.parentNode.insertBefore(i,a)}(window,document,"script",0,"ga"),ga("create",n.gaId,{name:"mopinion-"+n.surveyKey})):ga("create",n.gaId,{name:"mopinion-"+n.surveyKey})},this.sendGa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o="Mopinion Form - "+n.surveyName+r;we("Send Analytics",e,t,o),n.useGtag?gtag("event",e,je({event_category:o,send_to:n.gaId},t?{event_label:t}:{})):ga("mopinion-"+n.surveyKey+".send",je({hitType:"event",eventCategory:o,eventAction:e},t?{eventLabel:t}:{}))},this.sendFeedbackGa=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e,t){e.title&&n.sendGa("Q"+(t+1)+" - "+e.title,e.value," - Feedback")})};var r=t.properties,o=r.advanced,i=o.analytics_integration,a=void 0===i?{}:i,s=o.logMetrics;if(this.surveyKey=t.surveyKey,this.surveyName=t.properties.name,s&&(this.metrics=!0,we("Tracking Metrics")),a.load_analytics){var c="";try{c=ga.getAll()[0].get("trackingId")}catch(e){}this.useGtag="analytics.js"!==a.type,this.gaId=a.GA_TRACKING_ID||c||"",this.gaSendFeedback=!!a.sendFeedback,this.gaId&&(this.ga=!0,we("Tracking Analytics"),this.initGa())}},Pe=n("/C1n"),Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe=null,Me=function(e){function t(n){I(this,t);var r=L(this,e.call(this,n));if(r.startUrlTimer=function(){r.urlTimer=setInterval(function(){r.state.pageUrl!==document.location.href&&r.setState(function(e){return Ce({},e,{pageUrl:document.location.href,pageSearch:"?"+r.state.pageUrl.split("?").slice(1).join("?")})})},500)},r._getConfig=function(){var e=r.state.isPreviewPage,t=s("base");r.api.getConfig(!t,e).then(function(e){if(404===e.code)return void we("Survey not found");var n=!1,o=1,i={},a=!1,s={},l=[],p=e.layout.reduce(function(t,c){var p=e.blocks[c];s.hasOwnProperty(p.typeName)?s[p.typeName]++:s[p.typeName]=1;var u={field:p.typeName+"_"+p.id,label:p.id,id:p.id,data_field:p.data_field,value:function(){if(p.properties.preselectScore){l.push(p.id);var e=void 0;return"nps"===p.typeName||"thumbs"===p.typeName?e=Object(B.h)(p.typeName,r.state.pageSearch):"rating"===p.typeName&&(e="emoji"===p.properties.type?Object(B.h)("smiley",r.state.pageSeach):Object(B.h)("score",r.state.pageSearch)),e&&(n=!0),e}return p.properties.value?p.properties.value:""}(),type:p.typeName,error:"",required:p.properties&&p.properties.required,page:o,validateSubFields:[],validateExtraFields:[],isVisible:!p.properties.hide_on_init,setValueCookie:!(!p.properties||!p.properties.setScoreCookie),typeCount:s[p.typeName],isEmail:"email"===p.properties.format,isPhone:"tel"===p.properties.format},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return{data_field:e.data_field,value:"",error:"",isEmail:"email"===t,isPhone:"phone"===t||"phone2"===t,required:e.required||u.required||!1,page:n,isSub:!0,key:t,valueLabel:r,errorOnParent:["matrix","likert","checkbox","screenshot"].indexOf(p.typeName)>-1}};if(["contact","matrix","likert","checkbox","website_data","screenshot"].indexOf(p.typeName)>-1&&p.properties.elements&&Object.keys(p.properties.elements).reduce(function(e,t){var n=p.properties.elements[t];if("contact"===p.typeName){if(n.show)if("name"!==t||n.combine){var r=p.typeName+"_"+p.id+"_"+t;e[r]=Ce({field:r},d(n,t,o)),e.validateSubFields=[].concat(e.validateSubFields,[r])}else Object.keys(n.subelements).forEach(function(t){var r=p.typeName+"_"+p.id+"_"+t.replace("last","");e[r]=Ce({field:r},d(Ce({},n.subelements[t],{required:n.required}),t,o)),e.validateSubFields=[].concat(e.validateSubFields,[r])});e.errorOnChildren=!0}else e.errorOnParent=!0;if("likert"===p.typeName){var i=p.typeName+"_"+p.id+"_"+t;e[i]=Ce({field:i},d(n,t,o)),e.validateSubFields=[].concat(e.validateSubFields,[i])}if("matrix"===p.typeName){var s=p.typeName+"_"+p.id+"_"+t+"_value";e[s]=Ce({field:s},d({data_field:n.data_field.value,required:n.required},t,o));var c=p.typeName+"_"+p.id+"_"+t+"_weight";e[c]=Ce({field:c},d({data_field:n.data_field.weight,required:n.required},t,o)),e.validateSubFields=[].concat(e.validateSubFields,[s,c])}if("website_data"===p.typeName){var l=p.typeName+"_"+n.type+"_"+p.id+"_"+t;e[l]=Ce({field:l,isVisible:!1},d(n,t,o))}if("checkbox"===p.typeName){var u=p.typeName+"_"+p.id+"_"+t;e[u]=Ce({field:u},d(n,t,o)),e.validateSingle=!0,e.validateSubFields=[].concat(e.validateSubFields,[u])}if("screenshot"===p.typeName){var _=t+"_"+p.id;e[_]=Ce({field:_},d(p,t,o)),p.properties.bottomScreen&&(a=!0),e.validateSubFields=[].concat(e.validateSubFields,[_]),e.hasOwnProperty("screenshot_"+p.id)&&(e["screenshot_"+p.id]=Ce({field:"screenshot_"+p.id},d(p,"screenshot_"+p.id,o)),e.validateSubFields=[].concat(e.validateSubFields,["screenshot_"+p.id]))}return e},u),p.properties.randomize){p.properties.prevElements=p.properties.elements;var _=Object(B.m)(Object(B.s)(Object.keys(p.properties.elements)),p.properties.elements);e.blocks[c].properties.elements=_}return p.properties.option_extra&&p.properties.elements_extra&&Object.keys(p.properties.elements_extra).reduce(function(e,t){var n=p.properties.elements_extra[t];n.valueLabel=n.linkedLabel||n.label;var r=p.typeName+"_"+p.id+"_extra_"+t;if(e[r]=Ce({field:r},d(n,t,o),{valueLabel:n.linkedLabel||n.label}),e.validateExtraFields=[].concat(e.validateExtraFields,[r]),e.hasExtraFields=!0,"checkbox"===p.typeName&&(e.validateSingle=!0,e.hasExtraLinked=!0,n.linkedLabel)){var i=Object(B.c)(Object.keys(p.properties.elements_extra),function(e){return p.properties.elements_extra[e].label===n.linkedLabel});return-1!==i&&(e[r].linkedField=p.typeName+"_"+p.id+"_extra_"+(i+1)),e}return p.properties.elements[String(Number(Object.keys(p.properties.elements).pop())+1)]=Ce({},n,{value:n.label,valueLabel:n.linkedLabel||n.label,isExtra:!0,extraKey:t}),e},u),u.normalizedLogic=e.blockRules.hasOwnProperty(p.id)?e.blockRules[p.id].map(function(e){return"object"==typeof e?(e.condition.elements?e.condition.testValue=e.condition.elements.map(function(e){if(!(["gcr","radio","checkbox","select","thumbs","category"].indexOf(p.typeName)>-1||p.properties.labelsAsValue&&!isNaN(e)))return String(e);var t="rating"===p.typeName&&"emoji"===p.properties.type?p.properties.emoji:p.properties.elements;for(var n in t)if(n==e)return String(t[n].value?t[n].value:t[n].label)}):e.condition.trigger_element&&(e.condition.testValue=[e.condition.trigger_element]),e):{}}):[],"page_break"!==p.typeName?t.push(u):"page_break"===p.typeName&&(i[o]={page:o,prevLabel:p.properties.prevLabel,nextLabel:p.properties.nextLabel,id:p.id,autoPost:p.properties.autopost},o++),t},[]).map(function(e,t){return e.elementIndex=t,e}),u=e.properties.advanced.customLibraries,d=void 0===u?[]:u;if(p=r.globalLogic(p,e),"object"==typeof e.properties.advanced.recaptcha&&e.properties.advanced.recaptcha.siteKey&&(p=[].concat(p,[{field:"recaptcha",label:"recaptcha",id:"recaptcha",value:"",type:"recaptcha",error:"",required:!0,page:Number(Object.keys(e.pageMap).slice(-1).pop()),validateSubFields:[],isVisible:!0,setValueCookie:!1,normalizedLogic:[],elementIndex:p.length}]),e.blocks.recaptcha={typeName:"recaptcha",properties:{}}),e.properties.thanksPage&&e.properties.thanksPage.elements){var _=e.properties.thanksPage&&e.properties.thanksPage.elements?Object.keys(e.properties.thanksPage.elements).map(function(t,n){var r=e.properties.thanksPage.elements[t];return{field:"thanks-page_"+r.genID,hide_on_init:r.hide_on_init,label:"thanks-page_"+r.genID,id:"thanks-page_"+r.genID,value:"",type:r.type,error:"",required:!1,validateSubFields:[],isVisible:!r.hide_on_init,setValueCookie:!1,normalizedLogic:[],elementIndex:p.length+n}}):[];p=[].concat(p,_)}r.track=new ke(e);var f=e.css?Object.keys(e.css).reduce(function(t,n){return t[n]=e.css[n],c(n,e.css[n]),t},t?{base:t}:{}):t?{base:t}:{};Ce(K.b,e.icons),r.setState(function(t){var n=Ce(t.errorMessages,e.text.errors);return{elements:p,config:e,errorMessages:n,configWasLoaded:!0,breakBlocks:i,theme:e.theme,pageCount:Number(Object.keys(e.pageMap).slice(-1).pop()),themeName:e.themeClass,customScripts:d,screenshotOnAllPages:a,logMetrics:e.properties.advanced.logMetrics,formIsOnOpenerPage:!!e.properties.introPage,css:f}},function(){r.state.customScripts.length&&r.state.customScripts.forEach(function(e){"inner"!==e.scope&&Object(B.b)(e.url)}),l.forEach(function(e){var t=Object(B.c)(r.state.elements,function(t){return t.id===e});r.logic(r.state.elements[t])}),r.state.config.properties.advanced.block_webfont_loading||Object(B.k)(r.state.config.webFonts),r.state.config.properties.introPage&&r.setState(function(){return{formIsOnOpenerPage:!0}}),n&&setTimeout(function(){r._forcePost()},300),r.startState=r.state})}).catch(function(e){return we("Oops... Error while intializing",e)})},r._postApi=function(e,t,n){var o=r.state,i=o.config,a=o.config,s=a.sendOptions,c=a.properties,l=o.sendMode;r.api.postFeedback({token:s.token,domain:s.domain,surveyId:i.properties.id,ip:i.cip,feedback:r._collectFeedback(),mode:l}).then(function(){"insert"===l?r.setState({sendMode:"upsert"},function(){"function"==typeof e&&e()}):"function"==typeof e&&e(),setTimeout(function(){var e=r._collectFeedback(!0);Object(B.v)({event:t?"next":"feedback_sent",key:i.surveyKey,formName:c.name,feedback:e}),r.track.send(t?"Next page":"Feedback sent",{trigger_method:r.props.triggerMethod,form_completion_percentage:r.state.formCompletionPercentage,active_page:r.state.activePage,page_count:r.state.pageCount,form_type:r.form&&r.form._getFormType(),subdomain:r.props.domain,organisation_id:r.state.config.properties.organisation_id,project_id:r.state.config.properties.project_id}),t||n||(r.track.sendFeedback(r._collectFeedback(!0,!0)),r.feedbackId=Object(B.d)(10),r.customerId=Object(B.d)(20),c.notify&&c.notify.send&&r.api.notifyUser(e,c.notification_email))}),t||n||(Object(B.q)("MSFeedbackSent",i.surveyKey,r.props.cookieTime||30),Object(B.q)("MSFeedbackSent"+i.surveyKey,!0,r.props.cookieTime||30))}).catch(function(e){return we(e)})},r._collectFeedback=function(e,t){var n=r.state,o=n.elements,i=n.config,a=n.config.sendOptions,s=r.props.webView,c=a.data.reduce(function(n,r){var a=r.field,c=r.type,l=r.label,p=o.filter(function(e){return e.field==a||e.hasOwnProperty(a)})[0],u="";p&&(u=p.hasOwnProperty(a)?p[a].value:p.value),s&&(c=c.replace("image","mobile_image"));var d={label:l,value:u,type:c};if(e){var _=i.blocks[p.id];if(d=Ce({},d,{title:_.title,id:_.id,type:_.typeName,field:a}),t&&(["input","textarea","screenshot","website_data"].indexOf(_.typeName)>-1||["customer","id","url"].indexOf(c)>-1||"Page title"===l))return n}return n.push(d),n},[]);return c=[].concat(c,[{value:navigator.userAgent,type:"agent",label:"User Agent"},{value:r.state.pageUrl,type:"url",label:"url"},{value:document.title,type:"category",label:"Page title"},{value:1,type:"role",label:"Role"},{value:i.properties.name,type:"category",label:"Survey"},{value:r.state.viewPort,type:"viewport",label:"Viewport"},{value:r.props.triggerMethod,type:"category",label:"Form trigger"},{value:r.state.formCompletionPercentage,type:"form_completion",label:"Form completion percentage"},{value:r.feedbackId,type:"id",label:"Survey ID"}]),!1!==a.force_customer&&(c=[].concat(c,[{value:r.customerId,type:"customer",label:a.force_customer.label}])),c},r.notifyUser=function(e,t){var n=r.state.config.surveyKey,o=Object(B.c)(e,function(e){return e.field===t||e.hasOwnProperty(t)});if(-1!==o){var i=e[o].hasOwnProperty(t)?e[o][t]:e[o];i.value&&r.api.notifyUser({surveyKey:n,email:i.value})}},r._forceOpen=function(){try{r.form.toggleForm(!0)}catch(e){}},r._forceClose=function(){try{r.form.toggleForm(!1)}catch(e){}},r._forcePost=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r._postApi(function(){e&&r.setState({formIsCompleted:!0})},!1,!0)},r._forceSetPage=function(){r.setPage(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1])},r._passFormState=function(){return Ce([],r.state.elements)},r._passFormConfig=function(){return Ce({},r.state.config)},r._setFormValue=function(e,t){var n=r.state.elements.filter(function(t){return t.field==e})[0],o="string"==typeof t?{value:t}:t;if(n)r.updateForm(o,{},n.elementIndex);else{var i=r.state.elements.filter(function(t){return t.hasOwnProperty(e)})[0];i&&r.updateForm(o,{},i.elementIndex,e)}},r._setFormBlock=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.setState(function(n){var r;return Ce({},n,{config:Ce({},n.config,{blocks:Ce({},n.config.blocks,(r={},r[e]=Ce({},n.config.blocks[e],t),r))})})})},r._setFormBlockProperties=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.setState(function(n){var r;return Ce({},n,{config:Ce({},n.config,{blocks:Ce({},n.config.blocks,(r={},r[e]=Ce({},n.config.blocks[e],{properties:Ce({},n.config.blocks[e].properties,t)}),r))})})})},r._setFormBlockInnerElement=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.setState(function(r){var o,i;return Ce({},r,{config:Ce({},r.config,{blocks:Ce({},r.config.blocks,(i={},i[e]=Ce({},r.config.blocks[e],{properties:Ce({},r.config.blocks[e].properties,{elements:Ce({},r.config.blocks[e].properties.elements,(o={},o[t]=Ce({},r.config.blocks[e].properties.elements[t],n),o))})}),i))})})})},r._setFormProperties=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.setState(function(t){return Ce({},t,{config:Ce({},t.config,{properties:Ce({},t.config.properties,e)})})})},r._setFormText=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.setState(function(t){return Ce({},t,{config:Ce({},t.config,{text:Ce({},t.config.text,e)})})})},r._setFormErrors=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.setState(function(t){return Ce({},t,{errorMessages:Ce({},t.errorMessages,e)})})},r._clearForm=function(){r.setState(function(e){return Ce({},r.state.formIsCompleted?r.startState:e,{forceOpen:!1,renderNull:!0})})},r.state={configWasLoaded:!1,modalVisible:!1,validateOnChange:!1,elements:[],config:{properties:{},blocks:{},text:{},layout:[],theme:"isLoading",themeCustom:{}},errorMessages:{deflt:"Something went wrong",required:"This field is required",required_multi:"All fields are required",invalid_number:"This is not a valid number",invalid_phone:"This is not a valid phone number",invalid_email:"This is not a valid email address",too_short:"The answer is too short",too_long:"The answer is too long"},activePage:1,pageCount:1,modalStyle:"small",modalBackdrop:!1,formIsCompleted:!1,formIsOnOpenerPage:!1,formStatus:"",userAgent:navigator.userAgent,viewPort:window.innerWidth+"x"+window.innerHeight,divName:n.divName||"body",sendMode:"insert",followUpId:!1,triggerMethod:n.triggerMethod,formCompletionPercentage:0,isPublicLandingPage:document.location.pathname.indexOf("/survey/public/take-survey/")>-1,isPreviewPage:document.location.pathname.indexOf("/survey/manage/preview/")>-1,pageUrl:document.location.href,pageSearch:"",noErrorsOnLastPage:!1,forceOpen:n.forceOpen},r.state.isPublicLandingPage)try{r.state.pageUrl=r.state.pageUrl+document.querySelector("#public-survey-page-querystring").value}catch(e){r.state.pageUrl=document.location.href}r.state.pageSearch="";try{r.state.pageSearch="?"+r.state.pageUrl.split("?").slice(1).join("?")}catch(e){}return r.urlTimer=null,r.requestDomain=n.proxyDomain?n.proxyDomain:n.domain,r.track=null,r.feedbackId=Object(B.d)(10),r.customerId=Object(B.d)(20),r.api=Object(Pe.a)({domain:n.domain,formKey:n.formKey,webView:n.webView}),r}return A(t,e),t.prototype.getChildContext=function(){var e=this;return{config:this.state.config,theme:this.state.config.theme,themeName:this.state.themeName,text:this.state.config.text,customScripts:this.state.customScripts,webFonts:this.state.config.webFonts,scope:this,domain:this.props.domain,pageUrl:this.state.pageUrl,pageSearch:this.state.pageSearch,surveyKey:this.state.config.surveyKey,track:function(t,n){e.track.send(t,n)},css:this.state.css,requestDomain:this.requestDomain}},t.prototype.componentDidUpdate=function(e){this.props.forceOpen!==e.forceOpen&&this.setState({forceOpen:this.props.forceOpen})},t.prototype.componentDidMount=function(){this._getConfig(),this.startUrlTimer()},t.prototype.componentWillUnmount=function(){var e=this;setTimeout(function(){e.nextBase=null});try{this.config.abort()}catch(e){}clearInterval(this.urlTimer)},t.prototype.validateElement=function(e){var t=this,n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n.isVisible||n.isSub?Object.keys(o).length&&!o.isVisible?{showError:!1,error:""}:n.notAllValid?{showError:!0,error:t.state.errorMessages[n.validateSingle?"required":"required_multi"]}:String(e)||r||n.hasOwnProperty("notAllValid")?e&&n.isEmail?{showError:!function(e){return e.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}(e),error:t.state.errorMessages.invalid_email}:e&&n.isPhone?{showError:!function(e){return e.length>9&&e.match(/^[\(\)\s\-\+\d]{10,17}$/)}(e),error:t.state.errorMessages.invalid_phone}:{showError:!1,error:""}:{showError:!0,error:t.state.errorMessages.required}:{showError:!1,error:""}},r=function(e){e.validateSubFields.reduce(function(t,r){return t[r]=Ce({},e[r],n(e[r].value,e[r])),t},e);var t=e.validateSubFields.filter(function(t){return e[t].showError});return e.notAllValid=e.validateSingle?e.validateSubFields.length-1<t.length:0!==t.length,Ce({},e,n(e.value,e))};if(e.page===this.state.activePage&&(e.required||e.isEmail||e.isPhone||e.errorOnChildren)){if(e.required||!e.isPhone&&!e.isEmail){if(e.hasExtraFields){var o=e.validateExtraFields.filter(function(t){return e.hasExtraLinked&&e[t].linkedField?e[e[t].linkedField].value&&"false"!==e[e[t].linkedField].value:e[t].valueLabel===e.value})[0];return o?Ce({},e,n(e[o].value,e[o],!e[o].required)):e.errorOnParent?r(e):Ce({},e,n(e.value,e))}if(e.errorOnParent)return r(e);if(e.errorOnChildren){var i=!1;return e.validateSubFields.reduce(function(t,r){var o=Ce({},e[r],n(e[r].value,e[r],!e[r].required,t));return o.showError&&(i=!0),t[r]=o,t},e),Ce({},e,{showError:i})}return Ce({},e,n(e.value,e))}return Ce({},e,n(e.value,e,!0))}return Ce({},e,{showError:!1})},t.prototype.validateForm=function(){var e=this,t=void 0,n=this.state.elements.map(function(n,r){var o=e.validateElement(n);return o.showError&&!t&&(o.focusInvalid=!0,t=!0),e.updateForm(o,{},r,!1,!0),{isInvalid:o.showError,element:o,elementIndex:r}}).filter(function(e){return e.isInvalid});return this.state.validateOnChange||this.setState({validateOnChange:!0}),0===n.length},t.prototype.updateForm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{event:"",isLogicUpdate:!1,isElementUpdate:!1},n=arguments[2],r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={};if(this.state.validateOnChange&&!t.isLogicUpdate)if(o){var s,c=Ce({},this.state.elements[n][o],e),l=Ce({},this.state.elements[n],(s={},s[o]=c,s));if(this.state.elements[n].errorOnParent||this.state.elements[n].hasExtraFields)a=this.validateElement(l);else{var p;a=Ce({},l,(p={},p[o]=this.validateElement(c),p))}}else a=this.validateElement(Ce({},this.state.elements[n],e));else if(o){var u,d=Ce({},this.state.elements[n][o],e),_=Ce({},this.state.elements[n],(u={},u[o]=d,u));a=_}else a=Ce({},this.state.elements[n],e);t.isElementUpdate&&(xe=a.field),this.setState(function(e){var t;return{elements:Ce([].concat(e.elements),(t={},t[n]=Ce({},e.elements[n],a),t))}},function(){r.state.elements[n].normalizedLogic.length&&!i&&r.logic(r.state.elements[n],t.event),r.state.elements[n].setValueCookie&&Object(B.q)("MSanswer."+r.props.formKey+"."+a.id,a.value,r.props.cookieTime);var e=r.state,o=e.activePage,s=e.pageCount,c=e.breakBlocks,l=e.elements;if(!i&&c[o]&&c[o].autoPost&&!c[o].didAutoPost){l.filter(function(e){return e.page==o&&e.isVisible}).pop().field==l[n].field&&r.setState(function(e){var t;return{breakBlocks:Ce({},e.breakBlocks,(t={},t[o]=Ce({},e.breakBlocks[o],{didAutoPost:!0}),t))}},function(){s==o?r.validateAndPost():r.setPage(!0)})}})},t.prototype.globalLogic=function(e,t){var n=this,r={url:function(e){return n.state.pageUrl.indexOf(e)>-1},title:function(e){return document.title.indexOf(e)>-1},url_query:function(e){return Object(B.h)(e,n.state.pageSearch)},cookie:function(e){return Object(B.f)(e)}},o=function(t){var n=t.action,o="show"==n.action,i=r[n.source](n.key);n.targets.forEach(function(t){var r,a=Object(B.c)(e,function(e){return e.field==t}),s={};-1==a?-1!=(a=Object(B.c)(e,function(e){return e.hasOwnProperty(t.replace("or_last"))}))&&(s=Ce({},e[a]),"prefill"!==n.action?i&&(s[t.replace("or_last")].isVisible=o):i&&(s[t.replace("or_last")].value=i)):(s=Ce({},e[a]),"prefill"!==n.action?s.isVisible=i?o:!o:i&&(s.value=i)),e=Ce([].concat(e),(r={},r[a]=Ce({},e[a],s),r))})},i=t.surveyRules;return Object.keys(i).forEach(function(e){return o(i[e])}),e},t.prototype.logic=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={"===":function(e,t){return e==t},"!==":function(e,t){return e!=t},"*":function(e,t){return e.indexOf(t)>-1},"!*":function(){return-1==x.indexOf(y)}},o=this.state,i=o.config.blocks,a=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=o.action,s=o.condition;if("object"==typeof a&&"object"==typeof s&&Object(B.j)(s.testValue)){if(["input","keydown","keyup"].indexOf(o.trigger)>-1&&"input"!==n)return;if(["blur","focus"].indexOf(o.trigger)>-1&&"change"!==n)return;var c="show"==a.action,l=r.hasOwnProperty(s.operator)?r[s.operator]:function(){};a.targets.forEach(function(n){var r=Object(B.c)(t.state.elements,function(e){return e.field==n});if(-1!=r||-1!=(r=Object(B.c)(t.state.elements,function(e){return e.hasOwnProperty(n)}))){var o=i[e.id],a=s.testValue.filter(function(t){return e.validateSubFields.length?e.validateSubFields.concat(e.validateExtraFields?e.validateExtraFields:[]).filter(function(n){return-1==e.field.indexOf("checkbox")?l(e[n].value,t):l(e[n].value?o.properties.elements[e[n].key].value:"",t)}).length>0:l(e.value,t)}),p=void 0;p="&&"!==s.concat?a.length?c:!c:a.length==s.testValue.length?c:!c;var u={isVisible:p,fromClickedElement:""};p||(u.value=""),e.field===xe&&(u.fromClickedElement=e.field),(p||e.field===xe||t.state.elements[r].fromClickedElement!==xe)&&t.updateForm(u,{isLogicUpdate:!0},r)}})}};e.normalizedLogic.forEach(function(e){return a(e)})},t.prototype.setPage=function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(n||this.validateForm(!1)||!t)&&this.setState(function(n){var r="number"==typeof t?t:t?n.activePage+1:n.activePage-1;if(r>0&&r<=e.state.pageCount)return{activePage:r,formCompletionPercentage:Math.round((r-1)/e.state.pageCount*100),validateOnChange:!1}},function(){t&&!n&&e._postApi(!1,!0),t||e.track.send("Previous page",{trigger_method:e.props.triggerMethod,form_completion_percentage:e.state.formCompletionPercentage,active_page:e.state.activePage,page_count:e.state.pageCount,form_type:e.form&&e.form._getFormType(),subdomain:e.props.domain,organisation_id:e.state.config.properties.organisation_id,project_id:e.state.config.properties.project_id})})},t.prototype.startSurvey=function(){this.setState({formIsOnOpenerPage:!1})},t.prototype.validateAndPost=function(){var e=this;this.validateForm(!1)&&this.setState({noErrorsOnLastPage:!0,formCompletionPercentage:100},function(){e._postApi(function(){e.setState({formIsCompleted:!0})})})},t.prototype.render=function(e,t){var n=this,r=t.elements,o=t.config,i=t.activePage,a=t.breakBlocks,s=t.formIsCompleted,c=t.formIsOnOpenerPage,l=t.screenshotOnAllPages,p=t.formCompletionPercentage,u=t.pageCount,d=t.isPublicLandingPage,_=t.noErrorsOnLastPage,f=t.renderNull,h=t.forceOpen,m=this.props,b=m.triggerMethod,y=m.showButton,v=void 0===y||y,g=m.forceType,O=void 0!==g&&g,E=m.webView,w=void 0!==E&&E,j=m.webViewShowHeader,k=void 0!==j&&j,P={config:o,elements:r,blocks:o.blocks,activePage:i,pageCount:u,formCompletionPercentage:p,breakBlocks:a,setPage:function(e,t){n.setPage(e,t)},startSurvey:function(){n.startSurvey()},clearForm:function(){n._clearForm()},updateForm:function(e,t,r,o){n.updateForm(e,Ce(t,{isElementUpdate:!0}),r,o)},state:t,into:t.divName,formIsCompleted:s,formIsOnOpenerPage:c,validateAndPost:function(){n.validateAndPost()},screenshotOnAllPages:l,showButton:v,triggerMethod:b,forceOpen:h,isPublicLandingPage:d,cookieTime:e.cookieTime||30,ref:function(e){return n.form=e},forceType:O,noErrorsOnLastPage:_,webView:w,webviewShowHeader:k,renderNull:f,onClose:function(){s&&setTimeout(function(){n.setState(Ce({},n.startState))},300)}};return f?null:Object(N.h)("div",null,t.configWasLoaded?Object(N.h)(Oe,P):null)},t}(N.Component),De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se=function(e){try{return document.querySelector(e)?document.querySelector(e):document.querySelector("#"+e)}catch(e){return null}},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"==typeof e&&e.length&&-1==e.indexOf(",")?Se(e):"string"==typeof e&&e.indexOf(",")>-1?e.split(",").map(function(e){return Se(e)}):document.querySelector("#surveyContent:not(.mopinion-survey-content)")},Ie={version:2,ALL_KEYS:[],render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={formKey:e.key,domain:e.domain,forceOpen:e.openForm||["proactive","exit","force"].indexOf(e.trigger_method)>-1,showButton:"passive"===e.trigger_method,cookieTime:e.cookie_expire||30,triggerMethod:e.trigger_method||"",forcePost:e.forcePost||!1,skipToLast:e.skipToLast||!1,forceType:e.forceType||!1,webView:e.webView||!1,webViewShowHeader:e.webViewShowHeader||!1,renderNull:!1,proxyDomain:e.use_collect?"collect.mopinion.com":!!e.proxyDomain&&e.proxyDomain};if(!t.domain&&Ie.hasOwnProperty(t.formKey)&&Ie[t.formKey].hasOwnProperty("domain"))t.domain=Ie[t.formKey].domain;else if(!t.domain)try{t.domain=Ie[Ie.ALL_KEYS[0]].domain}catch(e){}if(!t.formKey)throw new Error("formKey required");Ie.hasOwnProperty(t.formKey)||(Ie[t.formKey]={},Ie.ALL_KEYS=[].concat(Ie.ALL_KEYS,[t.formKey]));var n=e.divName?Te(e.divName):Ie[t.formKey].divName?Ie[t.formKey].divName:null;return t.divName=n,we("Props",t),we("Options",e),we("Render div",Ie[t.formKey].renderDiv),Object(B.j)(n)?(Ie[t.formKey].renderDiv={},Ie[t.formKey]=De(Ie[t.formKey],De({},t)),n.forEach(function(e,n){Ie[t.formKey].renderDiv[n]=Object(N.render)(Object(N.h)(Me,De({key:t.formKey},t,{ref:function(e){e&&(Ie[t.formKey][n]=De({},Ie[t.formKey],De({},t),{_forceOpen:e._forceOpen,_forceClose:e._forceClose,_forcePost:e._forcePost,_getFormState:e._passFormState,_getFormConfig:e._passFormConfig,_setValue:e._setFormValue,_setBlock:e._setFormBlock,_setBlockProperties:e._setFormBlockProperties,_setBlockInnerElement:e._setFormBlockInnerElement,_setProperties:e._setFormProperties,_setText:e._setFormText,_setErrors:e._setFormErrors,_setPage:e._forceSetPage,thisRef:e}))}})),e||null,Ie[t.formKey].renderDiv[n])})):Ie[t.formKey].renderDiv=Object(N.render)(Object(N.h)(Me,De({key:t.formKey},t,{ref:function(e){e&&(Ie[t.formKey]=De(Ie[t.formKey],De({},t),{_forceOpen:e._forceOpen,_forceClose:e._forceClose,_forcePost:e._forcePost,_getFormState:e._passFormState,_getFormConfig:e._passFormConfig,_setValue:e._setFormValue,_setBlock:e._setFormBlock,_setBlockProperties:e._setFormBlockProperties,_setBlockInnerElement:e._setFormBlockInnerElement,_setProperties:e._setFormProperties,_setText:e._setFormText,_setErrors:e._setFormErrors,_setPage:e._forceSetPage,_clearForm:e._clearForm,thisRef:e}))}})),n||null,Ie[t.formKey].renderDiv),!0},open:function(){return Ie.render(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})},loadSurvey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ie.render({key:e.key,domain:e.domain,divName:e.divName,showButton:!1,use_collect:e.use_collect})},openModal:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ie.ALL_KEYS[0];try{Ie.hasOwnProperty(e)?Ie[e]._forceOpen():Ie.open({key:e,domain:Ie.ALL_KEYS[0].domain,trigger_method:"force"})}catch(e){we(e)}},closeModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie.ALL_KEYS[0];try{Ie[e]._forceClose()}catch(e){we(e)}},send:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{Object(B.j)(Ie[t].divName)?Ie[t].divName.forEach(function(n,r){return Ie[t][r]._forcePost(e)}):Ie[t]._forcePost(e)}catch(e){we(e)}},clearForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{Object(B.j)(Ie[e].divName)?Ie[e].divName.forEach(function(t,n){return Ie[e][n]._clearForm()}):Ie[e]._clearForm()}catch(e){we(e)}},setPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{Object(B.j)(Ie[e].divName)?Ie[e].divName.forEach(function(r,o){return Ie[e][o]._setPage(t,n)}):Ie[e]._setPage(t,n)}catch(e){we(e)}},getFormState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return Object(B.j)(Ie[e].divName)?Ie[e].divName.map(function(t,n){return Ie[e][n]._getFormState()}):Ie[e]._getFormState()}catch(e){we(e)}},getFormConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return Object(B.j)(Ie[e].divName)?Ie[e].divName.map(function(t,n){return Ie[e][n]._getFormConfig()}):Ie[e]._getFormConfig()}catch(e){we(e)}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{if(!Object(B.j)(Ie[e].divName))return Ie[e]._setValue(t,n);Ie[e].divName.forEach(function(r,o){return Ie[e][o]._setValue(t,n)})}catch(e){we(e)}},setBlock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2];try{if(!Object(B.j)(Ie[e].divName))return Ie[e]._setBlock(t,n);Ie[e].divName.forEach(function(r,o){return Ie[e][o]._setBlock(t,n)})}catch(e){we(e)}},setBlockProperties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2];try{if(!Object(B.j)(Ie[e].divName))return Ie[e]._setBlockProperties(t,n);Ie[e].divName.forEach(function(r,o){return Ie[e][o]._setBlockProperties(t,n)})}catch(e){we(e)}},setBlockInnerElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=t.id,r=t.elementKey,o=arguments[2];try{if(!Object(B.j)(Ie[e].divName))return Ie[e]._setBlockInnerElement(n,r,o);Ie[e].divName.forEach(function(t,i){return Ie[e][i]._setBlockInnerElement(n,r,o)})}catch(e){we(e)}},setProperties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];try{if(!Object(B.j)(Ie[e].divName))return Ie[e]._setProperties(t);Ie[e].divName.forEach(function(n,r){return Ie[e][r]._setProperties(t)})}catch(e){we(e)}},setText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];try{if(!Object(B.j)(Ie[e].divName))return Ie[e]._setText(t);Ie[e].divName.forEach(function(n,r){return Ie[e][r]._setText(t)})}catch(e){we(e)}},setErrors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];try{if(!Object(B.j)(Ie[e].divName))return Ie[e]._setErrors(t);Ie[e].divName.forEach(function(n,r){return Ie[e][r]._setErrors(t)})}catch(e){we(e)}},setCookie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2];return Object(B.q)(e,t,n)},getCookie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(B.f)(e)},getUrlParam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(B.h)(e)},getStrParam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.location.href;return Object(B.g)(e,t)},getParameterByName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.location.href;return Object(B.g)(e,t)}};"undefined"!=typeof window&&(window.srv=window.srv||Ie)},KM04:function(e){!function(){"use strict";function t(e,t){var n,r,o,i,a=I;for(i=arguments.length;i-- >2;)T.push(arguments[i]);for(t&&null!=t.children&&(T.length||T.push(t.children),delete t.children);T.length;)if((r=T.pop())&&void 0!==r.pop)for(i=r.length;i--;)T.push(r[i]);else"boolean"==typeof r&&(r=null),(o="function"!=typeof e)&&(null==r?r="":"number"==typeof r?r+="":"string"!=typeof r&&(o=!1)),o&&n?a[a.length-1]+=r:a===I?a=[r]:a.push(r),n=o;var s=new D;return s.nodeName=e,s.children=a,s.attributes=null==t?void 0:t,s.key=null==t?void 0:t.key,void 0!==S.vnode&&S.vnode(s),s}function n(e,t){for(var n in t)e[n]=t[n];return e}function r(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}function o(e,r){return t(e.nodeName,n(n({},e.attributes),r),arguments.length>2?[].slice.call(arguments,2):e.children)}function i(e){!e.__d&&(e.__d=!0)&&1==N.push(e)&&(S.debounceRendering||L)(a)}function a(){for(var e;e=N.pop();)e.__d&&j(e)}function s(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&c(e,t.nodeName):n||e._componentConstructor===t.nodeName}function c(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function l(e){var t=n({},e.attributes);t.children=e.children;var r=e.nodeName.defaultProps;if(void 0!==r)for(var o in r)void 0===t[o]&&(t[o]=r[o]);return t}function p(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.__n=e,n}function u(e){var t=e.parentNode;t&&t.removeChild(e)}function d(e,t,n,o,i){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)r(n,null),r(o,e);else if("class"!==t||i)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof n)for(var a in n)a in o||(e.style[a]="");for(var a in o)e.style[a]="number"==typeof o[a]&&!1===A.test(a)?o[a]+"px":o[a]}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,_,s):e.removeEventListener(t,_,s),(e.__l||(e.__l={}))[t]=o}else if("list"!==t&&"type"!==t&&!i&&t in e){try{e[t]=null==o?"":o}catch(e){}null!=o&&!1!==o||"spellcheck"==t||e.removeAttribute(t)}else{var c=i&&t!==(t=t.replace(/^xlink:?/,""));null==o||!1===o?c?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(c?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o))}else e.className=o||""}function _(e){return this.__l[e.type](S.event&&S.event(e)||e)}function f(){for(var e;e=R.shift();)S.afterMount&&S.afterMount(e),e.componentDidMount&&e.componentDidMount()}function h(e,t,n,r,o,i){B++||(K=null!=o&&void 0!==o.ownerSVGElement,U=null!=e&&!("__preactattr_"in e));var a=m(e,t,n,r,i);return o&&a.parentNode!==o&&o.appendChild(a),--B||(U=!1,i||f()),a}function m(e,t,n,r,o){var i=e,a=K;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),y(e,!0))),i.__preactattr_=!0,i;var s=t.nodeName;if("function"==typeof s)return k(e,t,n,r);if(K="svg"===s||"foreignObject"!==s&&K,s+="",(!e||!c(e,s))&&(i=p(s,K),e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),y(e,!0)}var l=i.firstChild,u=i.__preactattr_,d=t.children;if(null==u){u=i.__preactattr_={};for(var _=i.attributes,f=_.length;f--;)u[_[f].name]=_[f].value}return!U&&d&&1===d.length&&"string"==typeof d[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=d[0]&&(l.nodeValue=d[0]):(d&&d.length||null!=l)&&b(i,d,n,r,U||null!=u.dangerouslySetInnerHTML),g(i,t.attributes,u),K=a,i}function b(e,t,n,r,o){var i,a,c,l,p,d=e.childNodes,_=[],f={},h=0,b=0,v=d.length,g=0,O=t?t.length:0;if(0!==v)for(var E=0;E<v;E++){var w=d[E],j=w.__preactattr_,k=O&&j?w._component?w._component.__k:j.key:null;null!=k?(h++,f[k]=w):(j||(void 0!==w.splitText?!o||w.nodeValue.trim():o))&&(_[g++]=w)}if(0!==O)for(var E=0;E<O;E++){l=t[E],p=null;var k=l.key;if(null!=k)h&&void 0!==f[k]&&(p=f[k],f[k]=void 0,h--);else if(b<g)for(i=b;i<g;i++)if(void 0!==_[i]&&s(a=_[i],l,o)){p=a,_[i]=void 0,i===g-1&&g--,i===b&&b++;break}p=m(p,l,n,r),c=d[E],p&&p!==e&&p!==c&&(null==c?e.appendChild(p):p===c.nextSibling?u(c):e.insertBefore(p,c))}if(h)for(var E in f)void 0!==f[E]&&y(f[E],!1);for(;b<=g;)void 0!==(p=_[g--])&&y(p,!1)}function y(e,t){var n=e._component;n?P(n):(null!=e.__preactattr_&&r(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||u(e),v(e))}function v(e){for(e=e.lastChild;e;){var t=e.previousSibling;y(e,!0),e=t}}function g(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||d(e,r,n[r],n[r]=void 0,K);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||d(e,r,n[r],n[r]=t[r],K)}function O(e,t,n){var r,o=W.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),C.call(r,t,n)):(r=new C(t,n),r.constructor=e,r.render=E);o--;)if(W[o].constructor===e)return r.__b=W[o].__b,W.splice(o,1),r;return r}function E(e,t,n){return this.constructor(e,n)}function w(e,t,n,o,a){e.__x||(e.__x=!0,e.__r=t.ref,e.__k=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||a?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o)),o&&o!==e.context&&(e.__c||(e.__c=e.context),e.context=o),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==n&&(1!==n&&!1===S.syncComponentUpdates&&e.base?i(e):j(e,1,a)),r(e.__r,e))}function j(e,t,r,o){if(!e.__x){var i,a,s,c=e.props,p=e.state,u=e.context,d=e.__p||c,_=e.__s||p,m=e.__c||u,b=e.base,v=e.__b,g=b||v,E=e._component,k=!1,C=m;if(e.constructor.getDerivedStateFromProps&&(p=n(n({},p),e.constructor.getDerivedStateFromProps(c,p)),e.state=p),b&&(e.props=d,e.state=_,e.context=m,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,p,u)?k=!0:e.componentWillUpdate&&e.componentWillUpdate(c,p,u),e.props=c,e.state=p,e.context=u),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!k){i=e.render(c,p,u),e.getChildContext&&(u=n(n({},u),e.getChildContext())),b&&e.getSnapshotBeforeUpdate&&(C=e.getSnapshotBeforeUpdate(d,_));var x,M,D=i&&i.nodeName;if("function"==typeof D){var T=l(i);a=E,a&&a.constructor===D&&T.key==a.__k?w(a,T,1,u,!1):(x=a,e._component=a=O(D,T,u),a.__b=a.__b||v,a.__u=e,w(a,T,0,u,!1),j(a,1,r,!0)),M=a.base}else s=g,x=E,x&&(s=e._component=null),(g||1===t)&&(s&&(s._component=null),M=h(s,i,u,r||!b,g&&g.parentNode,!0));if(g&&M!==g&&a!==E){var I=g.parentNode;I&&M!==I&&(I.replaceChild(M,g),x||(g._component=null,y(g,!1)))}if(x&&P(x),e.base=M,M&&!o){for(var L=e,A=e;A=A.__u;)(L=A).base=M;M._component=L,M._componentConstructor=L.constructor}}for(!b||r?R.push(e):k||(e.componentDidUpdate&&e.componentDidUpdate(d,_,C),S.afterUpdate&&S.afterUpdate(e));e.__h.length;)e.__h.pop().call(e);B||o||f()}}function k(e,t,n,r){for(var o=e&&e._component,i=o,a=e,s=o&&e._componentConstructor===t.nodeName,c=s,p=l(t);o&&!c&&(o=o.__u);)c=o.constructor===t.nodeName;return o&&c&&(!r||o._component)?(w(o,p,3,n,r),e=o.base):(i&&!s&&(P(i),e=a=null),o=O(t.nodeName,p,n),e&&!o.__b&&(o.__b=e,a=null),w(o,p,1,n,r),e=o.base,a&&e!==a&&(a._component=null,y(a,!1))),e}function P(e){S.beforeUnmount&&S.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?P(n):t&&(null!=t.__preactattr_&&r(t.__preactattr_.ref,null),e.__b=t,u(t),W.push(e),v(t)),r(e.__r,null)}function C(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{},this.__h=[]}function x(e,t,n){return h(n,e,{},!1,t,!1)}function M(){return{}}var D=function(){},S={},T=[],I=[],L="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,A=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,N=[],R=[],B=0,K=!1,U=!1,W=[];n(C.prototype,{setState:function(e,t){this.__s||(this.__s=this.state),this.state=n(n({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this.__h.push(t),i(this)},forceUpdate:function(e){e&&this.__h.push(e),j(this,2)},render:function(){}});var F={h:t,createElement:t,cloneElement:o,createRef:M,Component:C,render:x,rerender:a,options:S};e.exports=F}()},VqYD:function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};!function(e,t){t(n("KM04"))}(0,function(e){"use strict";function t(e){return{type:e.constructor,key:e.key,ref:null,props:e.props}}function n(e){var t=e.nodeType===Node.ELEMENT_NODE?Array.from(e.childNodes):[],n=e.nodeType===Node.TEXT_NODE;return{_currentElement:n?e.textContent:{type:e.nodeName.toLowerCase(),props:e[d]},_renderedChildren:t.map(function(e){return a(e._component?e._component:e)}),_stringText:n?e.textContent:null,_inDevTools:!1,node:e}}function o(e){return"function"==typeof e.type?e.type.displayName||e.type.name:e.type}function i(e){var n=t(e),r=e.base,i={getName:function(){return o(n)},_currentElement:t(e),props:e.props,state:e.state,forceUpdate:e.forceUpdate&&e.forceUpdate.bind(e),setState:e.setState&&e.setState.bind(e),node:r};return i._instance=e,i._renderedComponent=a(e._component?e._component:r),i}function a(e){var t=e instanceof Node?n(e):i(e);if(_.has(e)){var o=_.get(e);return r(o,t),o}return _.set(e,t),t}function s(e){return"."+Object.keys(e).length}function c(e,t){Array.from(e.childNodes).forEach(function(e){e._component?t[s(t)]=a(e._component):c(e,t)})}function l(){var e={getNodeFromInstance:function(e){return e.node},getClosestInstanceFromNode:function(e){for(;e&&!e._component;)e=e.parentNode;return e?a(e._component):null}},t={};c(document.body,t);var n={_instancesByReactRootID:t,_renderNewRootComponent:function(){}},r={mountComponent:function(){},performUpdateIfNecessary:function(){},receiveComponent:function(){},unmountComponent:function(){}};return{componentAdded:function(e){var o=a(e);p(e)&&(o._rootID=s(t),t[o._rootID]=o,n._renderNewRootComponent(o)),u(o,function(e){e._inDevTools=!0,r.mountComponent(e)}),r.mountComponent(o)},componentUpdated:function(e){var t=[],n=_.get(e);n&&u(n,function(e){t.push(e)}),n=a(e),r.receiveComponent(n),u(n,function(e){e._inDevTools?r.receiveComponent(e):(e._inDevTools=!0,r.mountComponent(e))}),t.forEach(function(e){document.body.contains(e.node)||(_.delete(e.node),r.unmountComponent(e))})},componentRemoved:function(e){var n=a(e);u(function(e){_.delete(e.node),r.unmountComponent(e)}),r.unmountComponent(n),_.delete(e),n._rootID&&delete t[n._rootID]},ComponentTree:e,Mount:n,Reconciler:r}}function p(e){return!e._parentComponent&&!e.__u&&(!e.base.parentElement||!e.base.parentElement[d])}function u(e,t){e&&(e._renderedComponent?e._renderedComponent._component||(t(e._renderedComponent),u(e._renderedComponent,t)):e._renderedChildren&&e._renderedChildren.forEach(function(e){t(e),e._component||u(e,t)}))}var d="__preactattr_",_="function"==typeof Map&&new Map;!function(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var t=l(),n=e.options.afterMount;e.options.afterMount=function(e){t.componentAdded(e),n&&n(e)};var r=e.options.afterUpdate;e.options.afterUpdate=function(e){t.componentUpdated(e),r&&r(e)};var o=e.options.beforeUnmount;e.options.beforeUnmount=function(e){t.componentRemoved(e),o&&o(e)},__REACT_DEVTOOLS_GLOBAL_HOOK__.inject(t)}}()})},fkUE:function(e,t,n){"use strict";function r(){return Math.random().toString(36)}function o(e){return e.map(function(e){return{sort:Math.random(),value:e}}).sort(function(e,t){return e.sort-t.sort}).map(function(e){return e.value})}function i(e,t){return e.reduce(function(e,n,r){return e[String(r+1)]=t[n],e},{})}function a(e,t){for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}function s(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:35,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36,n="",r=void 0;n.length<e;)r=Math.random().toString(t).slice(2),n+=r.slice(0,Math.min(r.length,e-n.length));return n}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(e).replace(/(<([^>]+)>)/gi,"")}n.d(t,"h",function(){return l}),n.d(t,"g",function(){return p}),n.d(t,"f",function(){return u}),n.d(t,"q",function(){return d}),n.d(t,"b",function(){return f}),n.d(t,"u",function(){return h}),n.d(t,"a",function(){return m}),n.d(t,"o",function(){return b}),n.d(t,"i",function(){return y}),n.d(t,"k",function(){return v}),n.d(t,"c",function(){return O}),n.d(t,"v",function(){return E}),n.d(t,"e",function(){return w}),n.d(t,"n",function(){return j}),n.d(t,"j",function(){return k}),n.d(t,"l",function(){return P}),t.p=r,t.s=o,t.m=i,t.r=a,t.d=s,t.t=c;var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.search;e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=n.exec(t);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},p=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=n.exec(t);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},u=function(e){for(var t=document.cookie.split("; "),n=Array.isArray(t),r=0,t=n?t:t[Symbol.iterator]();;){var o;if(n){if(r>=t.length)break;o=t[r++]}else{if(r=t.next(),r.done)break;o=r.value}var i=o,a=i.split("="),s=a[0],c=a[1];if(e===s)return decodeURIComponent(c)}},d=function(e,t,n){var r="";if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),r="; expires="+o.toUTCString()}document.cookie=e+"="+(t||"")+r+"; path=/"},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments[2],r="srv-"+e.split("/").pop().replace(".css",""),o=t.getElementsByTagName("head")[0];if(t.getElementById(r))return void("function"==typeof n&&n());var i=t.createElement("link");i.type="text/css",i.rel="stylesheet",i.id=r,i.href=e,"function"==typeof n&&(i.onload=n),o.appendChild(i)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.doc,r=void 0===n?document:n,o=t.text,i=void 0===o?"":o,a=t.onLoad,s=e?"srv-"+e.split("/").pop().replace(".js",""):"",c=r.getElementsByTagName("head")[0];if(!r.getElementById(s)){var l=r.createElement("script");if(l.type="text/javascript",l.id=s,i?l.textContent=i:l.src=e,c.appendChild(l),"function"==typeof a){var p=!1;l.onload=l.onreadystatechange=function(){if(!(p||l.readyState&&"loaded"!==l.readyState&&"complete"!==l.readyState)){p=!0;try{a()}catch(e){}}}}}},h=function(e,t){var n=0;return function(){var r=(new Date).getTime();if(!(r-n<t))return n=r,e.apply(void 0,arguments)}},m=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.classList?r.classList.add(t):r.className+=" "+t}},b=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.classList?r.classList.remove(t):r.className=r.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}},y=function(e,t){return e.classList?e.classList.contains(t):new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;"string"==typeof e&&(e=[].concat(e));var n=e.filter(function(e){return e&&!g(e,t)});return n.length&&_("https://fonts.mopinion.com/css?family="+n.map(function(e){return e.replace(/ /g,"+")}).join("|"),t),n},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(t.fonts&&"function"==typeof t.fonts.check&&window.chrome)return t.fonts.check("12px "+e);var n=t.createElement("span");n.innerHTML="giItT1WQy@!-/#",n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontFamily="sans-serif",n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",t.body.appendChild(n);var r=n.offsetWidth;n.style.fontFamily=e+", sans-serif";var o=n.offsetWidth!==r;return n.parentNode.removeChild(n),o},O=function(e,t,n){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t,n);if("function"!=typeof t)throw new TypeError("predicate must be a function");var r=Object(e),o=r.length;if(0===o)return-1;for(var i=0;i<o;i++)if(t.call(n,r[i],i,r))return i;return-1},E=function(e){var t=e.element||document;if("function"==typeof CustomEvent){t.dispatchEvent(new CustomEvent("mopinion_"+e.event,{bubbles:!1,detail:e}))}else{var n=document.createEvent("CustomEvent");n.initCustomEvent("mopinion_"+e.event,!1,!1,e),t.dispatchEvent(n)}},w=function(e){var t={'"':"&quot;","'":"&#039;"};return e.replace(/["']/g,function(e){return t[e]})},j=function(e,t){return e.insertBefore(t,e.firstChild)},k=function(e){return Array.isArray?Array.isArray(e):e instanceof Array},P=function(e){return Array.prototype.slice.call(e)}},lqzJ:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return d});var a=n("KM04"),s=(n.n(a),n("9yYZ")),c=(n.n(s),n("zXdP")),l=n.n(c),p=n("/C1n");n.d(t,"b",function(){return l.a});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(e){function t(){for(var t,n,r,i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=n=o(this,e.call.apply(e,[this].concat(a))),n.state={icon:{}},r=t,o(n,r)}return i(t,e),t.prototype.componentDidMount=function(){var e=this;this.testIcon=this.props.icon.replace("fa-","").replace("fa ",""),l.a[this.testIcon]?this.setState({icon:l.a[this.testIcon]}):Object(p.a)({domain:this.context.requestDomain}).getIcons(this.testIcon).then(function(t){var n="string"==typeof t?JSON.parse(t):t;l.a[e.testIcon]=n[e.testIcon],e.setState({icon:n[e.testIcon]})})},t.prototype.render=function(e){var t=this.state.icon,n=void 0===t?{}:t,o=r(e,["className"]),i=u({className:"mopicon mopicon-"+this.testIcon+" "+(e.className||"")},o);return Object(a.h)("i",i,Object(a.h)("svg",{viewBox:n.viewBox||"0 0 28 28"},Object(a.h)("path",{d:n.path||"",fill:"currentColor"})))},t}(a.Component)},q6qL:function(e,t,n){!function(t,r){e.exports=r(n("KM04"))}(0,function(e){"use strict";var t=(function(){function e(e){this.value=e}function t(t){function n(e,t){return new Promise(function(n,o){var s={key:e,arg:t,resolve:n,reject:o,next:null};a?a=a.next=s:(i=a=s,r(e,t))})}function r(n,i){try{var a=t[n](i),s=a.value;s instanceof e?Promise.resolve(s.value).then(function(e){r("next",e)},function(e){r("throw",e)}):o(a.done?"return":"normal",a.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}i=i.next,i?r(i.key,i.arg):a=null}var i,a;this._invoke=n,"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}),n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=function(r){function i(){return n(this,r.apply(this,arguments))}return t(i,r),i.prototype.componentDidUpdate=function(e){for(var t in e)if(e[t]!==this.props[t])return setTimeout(this.renderLayer)},i.prototype.componentDidMount=function(){this.isMounted=!0,(this.renderLayer=this.renderLayer.bind(this))()},i.prototype.componentWillUnmount=function(){this.renderLayer(!1),this.isMounted=!1,this.remote&&this.remote.parentNode.removeChild(this.remote)},i.prototype.findNode=function(e){return"string"==typeof e?document.querySelector(e):e},i.prototype.renderLayer=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isMounted&&(this.props.into!==this.intoPointer&&(this.intoPointer=this.props.into,this.into&&this.remote&&(this.remote=e.render(e.h(o,null),this.into,this.remote)),this.into=this.findNode(this.props.into)),this.remote=e.render(e.h(o,{context:this.context},t&&this.props.children||null),this.into,this.remote))},i.prototype.render=function(){return null},i}(e.Component),o=function(e){function r(){return n(this,e.apply(this,arguments))}return t(r,e),r.prototype.getChildContext=function(){return this.props.context},r.prototype.render=function(e){var t=e.children;return t&&t[0]||null},r}(e.Component);return r})},sk4b:function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return m});var i=n("KM04"),a=(n.n(i),n("q6qL")),s=n.n(a),c=n("fkUE"),l=n("lqzJ"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=!1,d=function(e){function t(){for(var t,n,o,i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=n=r(this,e.call.apply(e,[this].concat(a))),n.onMouseMove=function(e){n.props.showCapture&&n.props.onMouseMove(e)},n.onClick=function(e){n.props.showCapture&&!u&&n.props.onClick(e)},n.onScroll=function(e){n.props.onScroll(e)},n.onTouchEnd=function(e){u=!0,n.props.showCapture&&"function"==typeof n.props.onClick&&n.props.onClick(e)},o=t,r(n,o)}return o(t,e),t.prototype.componentDidMount=function(){var e=this;"function"==typeof this.props.onMouseMove&&addEventListener("mousemove",this.onMouseMove),"function"==typeof this.props.onScroll&&addEventListener("scroll",this.onScroll),"function"==typeof this.props.onClick&&setTimeout(function(){addEventListener("mousedown",e.onClick)}),addEventListener("touchend",this.onTouchEnd)},t.prototype.componentWillUnmount=function(){removeEventListener("mousemove",this.onMouseMove),removeEventListener("scroll",this.onScroll),removeEventListener("mousedown",this.onClick),removeEventListener("touchstart",this.onTouchEnd)},t.prototype.render=function(e){var t=e.children,n=t[0];return"function"==typeof n?n():n},t}(i.Component),_=Object(i.h)("div",{class:"dimmer-border"}),f=Object(i.h)(l.a,{icon:"mouse-pointer"}),h=Object(i.h)(l.a,{icon:"hand-pointer-o"}),m=function(e){function t(t){var n=r(this,e.call(this,t));return n.state={dimTop:{},dimRight:{},dimLeft:{},dimBottom:{},dimHighlight:{},selectedTarget:!1,dom:{},selector:{}},n.screenshotIsRendering="https://mopinion-visual-feedback.s3-eu-west-1.amazonaws.com/camera-icon.png",n}return o(t,e),t.prototype.componentWillReceiveProps=function(e){e.showCapture&&!this.props.showCapture&&this.setState({dimTop:{},dimRight:{},dimLeft:{},dimBottom:{},dimHighlight:{},selectedTarget:!1})},t.prototype.mouseMove=function(e){this.state.selectedTarget||u||this.setDim(e.target)},t.prototype.anonymizeDOM=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelector("html"),n=t.querySelector("#mopinion_dimmer_overlay");n&&n.parentNode.removeChild(n);var r=["[data-mop-supress]"];this.props.block.properties.hasOwnProperty("maskedSelectors")&&(r=[].concat(r,[this.props.block.properties.maskedSelectors])),Object(c.l)(t.querySelectorAll("input, select, textarea")).forEach(function(e){try{e.value="***"}catch(e){}try{e.checked=!1}catch(e){}try{e.setAttribute("data-mopinion-mask-input","")}catch(e){}}),r.forEach(function(e){try{Object(c.l)(t.querySelectorAll(e)).forEach(function(e){Object(c.l)(e.querySelectorAll(sel)).forEach(function(e){e.setAttribute("data-mopinion-mask-extra","")})})}catch(e){}});var o=t.querySelector("base");if(o){if(o){var i=-1==o.href.indexOf(location.origin)?""+location.origin+("/"===o.href.charAt(0)?o.href:"/"+o.href):o.href;o.href=i}}else{var a=e.createElement("base");a.href=location.origin,Object(c.n)(e.querySelector("head"),a)}return Object(c.e)(t.outerHTML.replace(/(\r\n|\n|\r)/gm," ").trim())},t.prototype.anonymizeSelector=function(e){var t=this.props.block,n=["[data-mop-supress]"];return t.properties.hasOwnProperty("maskedSelectors")&&Object(c.j)(t.properties.maskedSelectors)&&(n=[].concat(n,t.properties.maskedSelectors)),Object(c.l)(e.querySelectorAll("input, select, textarea")).forEach(function(e){try{e.value="***"}catch(e){}try{e.checked=!1}catch(e){}try{e.setAttribute("data-mopinion-mask-input","")}catch(e){}}),n.forEach(function(t){if("string"==typeof t){var n=document.querySelector(t);n&&e.isEqualNode(n)?e.innerHTML="***":Object(c.l)(e.querySelectorAll(t)).forEach(function(e){e.innerHTML="***"})}}),e.outerHTML.replace(/(\r\n|\n|\r)/gm," ").trim()},t.prototype.onClick=function(e){var t=this;if(("embed"!==this.props.formType||!this.state.selectedTarget)&&(e.preventDefault(),e.stopPropagation(),!this.state.selectedTarget&&!this.dimmer.contains(e.target)||u||this.props.contentDiv.contains(e.selectedTarget))){var n=e.target;if(u&&!Object(c.i)(e.target,"btn-select-touch"))return this.setDim(e.target,!0);u&&Object(c.i)(e.target,"btn-select-touch")&&(n=this.state.selectedTarget);try{document.querySelector("[data-mopinion-screen-capture]").removeAttribute("[data-mopinion-screen-capture]")}catch(e){}n.setAttribute("data-mopinion-screen-capture","");var r=this.anonymizeSelector(n.cloneNode(!0)),o=this.anonymizeDOM(document.cloneNode(!0));return this.setState(function(){return{dom:o,selector:r}},function(){t.setDim(n,!0),t.props.updateForm(t.state.dom,"dom_"+t.props.block.id),t.props.updateForm(t.state.selector,"selector_"+t.props.block.id),t.props.updateForm(t.screenshotIsRendering,"screenshot_"+t.props.block.id),t.props.setCapture()})}},t.prototype.onScroll=function(){this.state.selectedTarget&&this.setDim(this.state.selectedTarget,!0)},t.prototype.setDim=function(e,t){var n=this,r=e.getBoundingClientRect(),o={position:"fixed",background:"rgba(0,0,0,.3)",pointerEvents:"none"};this.setState(function(){var i={dimTop:p({},o,{top:0,height:r.top,left:0,right:0}),dimRight:p({},o,{top:r.top,height:r.height,width:window.innerWidth-r.right,right:0}),dimBottom:p({},o,{top:r.bottom,bottom:0,left:0,right:0}),dimLeft:p({},o,{top:r.top,height:r.height,left:0,width:r.left})};return e&&t?(i.dimHighlight={position:"fixed",top:r.top-3,left:r.left-3,height:r.height+6,width:r.width+6},i.selectedTarget=e):(i.dimHighlight={},i.tempHighlight={position:"fixed",top:r.top-3,left:r.left-3,height:r.height+6,width:r.width+6},"embed"===n.props.formType&&(i.tempHighlight.borderColor="#B6B6B6")),p({},i)})},t.prototype.render=function(e,t,n){var r=this;return Object(i.h)("div",null,Object(i.h)(s.a,{into:"body"},Object(i.h)(d,{onMouseMove:function(e){r.mouseMove(e)},onClick:function(e){r.onClick(e)},onScroll:function(e){r.onScroll(e)},showCapture:e.showCapture},Object(i.h)("div",{id:"mopinion_dimmer_overlay","data-dimmer-for":n.config.properties.formKey,class:n.themeName+" mopinion-dimmer",ref:function(e){return r.dimmer=e}},_,Object(i.h)("div",{class:"dimmer-actions"},0==Object.keys(t.dimHighlight).length?Object(i.h)("div",null,Object(i.h)(l.a,{icon:"mouse-pointer",style:{marginRight:"10px"}}),e.text.screenCaptureText):Object(i.h)("div",null,Object(i.h)(l.a,{icon:"check",style:{marginRight:"10px"}}),e.text.screenCaptureSelected),Object(i.h)("div",{class:"dimmer-cancel",onClick:function(){e.removeCapture()}},"")),Object.keys(t.dimTop).length>0?Object(i.h)("div",null,"embed"!==e.formType?Object(i.h)("div",null,Object(i.h)("div",{style:t.dimTop}),Object(i.h)("div",{style:t.dimRight}),Object(i.h)("div",{style:t.dimBottom}),Object(i.h)("div",{style:t.dimLeft})):null,Object.keys(t.dimHighlight).length?Object(i.h)("div",{class:"dimmer-highlight dimmer-selected",style:t.dimHighlight,onClick:function(e){e.preventDefault(),e.stopPropagation()}},u?Object(i.h)("button",{type:"button",class:"btn-select-touch"},e.text.screenCaptureTouchBtnText):null):Object.keys(t.tempHighlight).length>0?Object(i.h)("div",{class:"dimmer-highlight",style:t.tempHighlight,onClick:function(e){e.preventDefault(),e.stopPropagation()}}):null):Object(i.h)("div",null,Object(i.h)("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,background:"rgba(0,0,0,.3)"}}),Object(i.h)("div",{class:"capture-hint"},u?h:f,Object(i.h)("div",null,e.text.screenCaptureHint)))))))},t}(i.Component)},vSUH:function(e,t,n){"use strict";var r=n("KM04"),o=function(e){return e&&e.default?e.default:e};if("function"==typeof o(n("JkW7"))){var i=document.body.firstElementChild,a=function(){var e=o(n("JkW7"));i=(0,r.render)((0,r.h)(e),document.body,i)};a()}},wVGV:function(e,t,n){"use strict";function r(){}var o=n("Asjh");e.exports=function(){function e(e,t,n,r,i,a){if(a!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},zXdP:function(e){e.exports={check:{viewBox:"0 0 28 28",path:"M26.109 8.844c0 0.391-0.156 0.781-0.438 1.062l-13.438 13.438c-0.281 0.281-0.672 0.438-1.062 0.438s-0.781-0.156-1.062-0.438l-7.781-7.781c-0.281-0.281-0.438-0.672-0.438-1.062s0.156-0.781 0.438-1.062l2.125-2.125c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l4.594 4.609 10.25-10.266c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l2.125 2.125c0.281 0.281 0.438 0.672 0.438 1.062z"},"angle-right":{viewBox:"0 0 9 28",path:"M9.297 15c0 0.125-0.063 0.266-0.156 0.359l-7.281 7.281c-0.094 0.094-0.234 0.156-0.359 0.156s-0.266-0.063-0.359-0.156l-0.781-0.781c-0.094-0.094-0.156-0.219-0.156-0.359 0-0.125 0.063-0.266 0.156-0.359l6.141-6.141-6.141-6.141c-0.094-0.094-0.156-0.234-0.156-0.359s0.063-0.266 0.156-0.359l0.781-0.781c0.094-0.094 0.234-0.156 0.359-0.156s0.266 0.063 0.359 0.156l7.281 7.281c0.094 0.094 0.156 0.234 0.156 0.359z"},"angle-left":{viewBox:"0 0 11 28",path:"M9.797 8.5c0 0.125-0.063 0.266-0.156 0.359l-6.141 6.141 6.141 6.141c0.094 0.094 0.156 0.234 0.156 0.359s-0.063 0.266-0.156 0.359l-0.781 0.781c-0.094 0.094-0.234 0.156-0.359 0.156s-0.266-0.063-0.359-0.156l-7.281-7.281c-0.094-0.094-0.156-0.234-0.156-0.359s0.063-0.266 0.156-0.359l7.281-7.281c0.094-0.094 0.234-0.156 0.359-0.156s0.266 0.063 0.359 0.156l0.781 0.781c0.094 0.094 0.156 0.219 0.156 0.359z"},"paper-plane-o":{viewBox:"0 0 28 28",path:"M27.563 0.172c0.328 0.234 0.484 0.609 0.422 1l-4 24c-0.047 0.297-0.234 0.547-0.5 0.703-0.141 0.078-0.313 0.125-0.484 0.125-0.125 0-0.25-0.031-0.375-0.078l-8.234-3.359-4.656 5.109c-0.187 0.219-0.453 0.328-0.734 0.328-0.125 0-0.25-0.016-0.359-0.063-0.391-0.156-0.641-0.531-0.641-0.938v-7.063l-7.375-3.016c-0.359-0.141-0.594-0.469-0.625-0.859-0.031-0.375 0.172-0.734 0.5-0.922l26-15c0.328-0.203 0.75-0.187 1.062 0.031zM22.219 23.594l3.453-20.672-22.406 12.922 5.25 2.141 13.484-9.984-7.469 12.453z"},"commenting-o":{viewBox:"0 0 28 28",path:"M10 14c0 1.109-0.891 2-2 2s-2-0.891-2-2 0.891-2 2-2 2 0.891 2 2zM16 14c0 1.109-0.891 2-2 2s-2-0.891-2-2 0.891-2 2-2 2 0.891 2 2zM22 14c0 1.109-0.891 2-2 2s-2-0.891-2-2 0.891-2 2-2 2 0.891 2 2zM14 6c-6.5 0-12 3.656-12 8 0 2.328 1.563 4.547 4.266 6.078l1.359 0.781-0.422 1.5c-0.297 1.109-0.688 1.969-1.094 2.688 1.578-0.656 3.016-1.547 4.297-2.672l0.672-0.594 0.891 0.094c0.672 0.078 1.359 0.125 2.031 0.125 6.5 0 12-3.656 12-8s-5.5-8-12-8zM28 14c0 5.531-6.266 10-14 10-0.766 0-1.531-0.047-2.266-0.125-2.047 1.813-4.484 3.094-7.187 3.781-0.562 0.156-1.172 0.266-1.781 0.344h-0.078c-0.313 0-0.594-0.25-0.672-0.594v-0.016c-0.078-0.391 0.187-0.625 0.422-0.906 0.984-1.109 2.109-2.047 2.844-4.656-3.219-1.828-5.281-4.656-5.281-7.828 0-5.516 6.266-10 14-10v0c7.734 0 14 4.484 14 10z"},star:{viewBox:"0 0 26 28",path:"M26 10.109c0 0.281-0.203 0.547-0.406 0.75l-5.672 5.531 1.344 7.812c0.016 0.109 0.016 0.203 0.016 0.313 0 0.406-0.187 0.781-0.641 0.781-0.219 0-0.438-0.078-0.625-0.187l-7.016-3.687-7.016 3.687c-0.203 0.109-0.406 0.187-0.625 0.187-0.453 0-0.656-0.375-0.656-0.781 0-0.109 0.016-0.203 0.031-0.313l1.344-7.812-5.688-5.531c-0.187-0.203-0.391-0.469-0.391-0.75 0-0.469 0.484-0.656 0.875-0.719l7.844-1.141 3.516-7.109c0.141-0.297 0.406-0.641 0.766-0.641s0.625 0.344 0.766 0.641l3.516 7.109 7.844 1.141c0.375 0.063 0.875 0.25 0.875 0.719z"},refresh:{viewBox:"0 0 24 28",path:"M23.609 16.5c0 0.031 0 0.078-0.016 0.109-1.328 5.531-5.891 9.391-11.656 9.391-3.047 0-6-1.203-8.219-3.313l-2.016 2.016c-0.187 0.187-0.438 0.297-0.703 0.297-0.547 0-1-0.453-1-1v-7c0-0.547 0.453-1 1-1h7c0.547 0 1 0.453 1 1 0 0.266-0.109 0.516-0.297 0.703l-2.141 2.141c1.469 1.375 3.422 2.156 5.437 2.156 2.781 0 5.359-1.437 6.813-3.813 0.375-0.609 0.562-1.203 0.828-1.828 0.078-0.219 0.234-0.359 0.469-0.359h3c0.281 0 0.5 0.234 0.5 0.5zM24 4v7c0 0.547-0.453 1-1 1h-7c-0.547 0-1-0.453-1-1 0-0.266 0.109-0.516 0.297-0.703l2.156-2.156c-1.484-1.375-3.437-2.141-5.453-2.141-2.781 0-5.359 1.437-6.813 3.813-0.375 0.609-0.562 1.203-0.828 1.828-0.078 0.219-0.234 0.359-0.469 0.359h-3.109c-0.281 0-0.5-0.234-0.5-0.5v-0.109c1.344-5.547 5.953-9.391 11.719-9.391 3.063 0 6.047 1.219 8.266 3.313l2.031-2.016c0.187-0.187 0.438-0.297 0.703-0.297 0.547 0 1 0.453 1 1z"},camera:{viewBox:"0 0 30 28",path:"M15 10.5c2.484 0 4.5 2.016 4.5 4.5s-2.016 4.5-4.5 4.5-4.5-2.016-4.5-4.5 2.016-4.5 4.5-4.5zM26 4c2.203 0 4 1.797 4 4v14c0 2.203-1.797 4-4 4h-22c-2.203 0-4-1.797-4-4v-14c0-2.203 1.797-4 4-4h3.5l0.797-2.125c0.391-1.031 1.609-1.875 2.703-1.875h8c1.094 0 2.312 0.844 2.703 1.875l0.797 2.125h3.5zM15 22c3.859 0 7-3.141 7-7s-3.141-7-7-7-7 3.141-7 7 3.141 7 7 7z"}}}});